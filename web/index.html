<!DOCTYPE html>
<html lang="zh-CN" class="bg-[#1e1e1e]">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Memex Pro</title>
    <!-- ‰ΩøÁî® Tailwind CDN JIT ‰ª•ÊîØÊåÅÊñá‰ª∂ÂÜÖÁöÑ‰ªªÊÑèÁ±ªÔºàbg-[#131314]„ÄÅscale-[1.1] Á≠âÔºâ -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Vue 3 Áîü‰∫ßÁâàÊú¨ - ‰ΩøÁî® jsdelivr CDN -->
    <script src="https://cdn.jsdelivr.net/npm/vue@3/dist/vue.global.prod.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="/static/css/style.css?t=1734254800">
    <link rel="manifest" href="/static/manifest.json">
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', async () => {
                console.log("üöÄ Current Page Port:", window.location.port);

                // 1. Unregister ALL old Service Workers
                try {
                    const registrations = await navigator.serviceWorker.getRegistrations();
                    for (let registration of registrations) {
                        console.log("üóëÔ∏è Unregistering old SW:", registration.scope);
                        await registration.unregister();
                    }
                    console.log("‚úÖ Old SWs unregistered.");
                } catch (e) {
                    console.error("‚ö†Ô∏è Failed to unregister old SWs:", e);
                }

                // 2. Register New Service Worker (sw_v2.js)
                navigator.serviceWorker.register('/static/sw_v2.js')
                    .then(registration => {
                        console.log('‚úÖ New SW (v2) registered with scope: ', registration.scope);
                    })
                    .catch(registrationError => {
                        console.log('‚ùå SW registration failed: ', registrationError);
                    });
            });
        }
    </script>
</head>

<body
    class="bg-gradient-to-b from-[#1E1E1E] to-[#0F0F0F] text-[#E3E3E3] font-sans antialiased text-[15px] md:text-base leading-7 bg-fixed">

    <div id="app" v-cloak>
        <!-- ÁôªÂΩïÁïåÈù¢ -->
        <div v-if="showLogin" class="fixed inset-0 bg-[#131314] flex items-center justify-center z-50">
            <div class="bg-[#1E1F20] rounded-lg shadow-2xl p-8 w-full max-w-md border border-[#333]">
                <div class="text-center mb-6">
                    <span class="material-icons text-blue-500 text-5xl mb-2">psychology</span>
                    <h1 class="text-2xl font-bold text-white mb-2">Memex Pro</h1>
                    <p class="text-gray-400 text-sm">ËØ∑ÁôªÂΩï‰ª•ÁªßÁª≠‰ΩøÁî®</p>
                </div>

                <div v-if="loginError"
                    class="mb-4 p-3 bg-red-900/30 border border-red-500/50 rounded text-red-300 text-sm">
                    {{ loginError }}
                </div>

                <form @submit.prevent="login" class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-300 mb-2">Áî®Êà∑Âêç</label>
                        <input v-model="loginForm.username" type="text" required
                            class="w-full px-4 py-2 bg-[#2A2B2E] border border-[#333] rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                            placeholder="ËØ∑ËæìÂÖ•Áî®Êà∑Âêç" :disabled="isLoggingIn" />
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-300 mb-2">ÂØÜÁ†Å</label>
                        <input v-model="loginForm.password" type="password" required
                            class="w-full px-4 py-2 bg-[#2A2B2E] border border-[#333] rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                            placeholder="ËØ∑ËæìÂÖ•ÂØÜÁ†Å" :disabled="isLoggingIn" />
                    </div>

                    <button type="submit" :disabled="isLoggingIn"
                        class="w-full py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2">
                        <span v-if="isLoggingIn" class="material-icons text-sm animate-spin">refresh</span>
                        <span>{{ isLoggingIn ? 'ÁôªÂΩï‰∏≠...' : 'ÁôªÂΩï' }}</span>
                    </button>
                </form>
            </div>
        </div>

        <!-- ‰∏ªÂ∫îÁî® -->
        <div v-show="!showLogin" class="flex h-[var(--app-height,100vh)] overflow-hidden relative"
            style="--app-height: 100dvh">

            <!-- Mobile Backdrop -->
            <div v-show="isMobileMenuOpen" @click="isMobileMenuOpen = false"
                class="fixed inset-0 bg-black/60 backdrop-blur-sm z-40 md:hidden transition-opacity duration-300"
                style="display: none;" :style="{ display: isMobileMenuOpen ? 'block' : 'none' }">
            </div>

            <aside v-show="currentView !== 'config'" :class="['flex flex-col h-full glass-heavy transition-transform duration-300 z-50 overflow-x-hidden overflow-y-auto scrollbar-hide', 
            isSidebarCollapsed ? 'w-[80px]' : 'w-[260px]',
            'fixed md:relative h-full', 
            !isMobileMenuOpen ? '-translate-x-full md:translate-x-0' : 'translate-x-0'
        ]">

                <div class="h-16 flex items-center justify-between px-6 pt-2 border-b border-[#333] shrink-0">
                    <button @click="goHome" v-show="!isSidebarCollapsed"
                        class="font-extrabold text-3xl tracking-wide whitespace-nowrap overflow-hidden text-transparent bg-clip-text bg-gradient-to-r from-blue-400 via-purple-400 to-pink-400 hover:opacity-90 transition-opacity pl-1">
                        Memex
                    </button>
                    <button @click="toggleSidebar"
                        :class="['text-gray-400 hover:text-white transition-colors p-2 rounded hover:bg-[#333]', isSidebarCollapsed ? 'mx-auto' : '']">
                        <span class="material-icons text-xl">menu_open</span>
                    </button>
                </div>



                <!-- ‰ºöËØùÂàóË°® - ÂßãÁªàÊòæÁ§∫ÔºàÊó†ËÆ∫ÊòØÂê¶Âú®ËÅäÂ§©ËßÜÂõæÔºâ -->
                <div v-show="!isSidebarCollapsed"
                    class="flex-1 overflow-y-auto scrollbar-hide px-7 pb-7 flex flex-col gap-5 min-h-0"
                    @click="closeSessionMenu">

                    <!-- New Chat (Moved from top) -->
                    <button @click="createNewSession"
                        class="flex items-center w-full rounded-xl px-4 h-14 shrink-0 cursor-pointer transition-all duration-300 bg-gradient-to-br from-[#1E1F20] to-[#2A2B2E] border border-[#3a3b3d] text-white shadow-lg shadow-blue-500/15 hover:border-blue-500 hover:scale-105 hover:shadow-xl hover:shadow-blue-500/25 active:scale-100 overflow-visible gap-3">
                        <span class="material-icons text-[18px]">add</span>
                        <span class="text-base font-medium truncate">Êñ∞ÁöÑÂØπËØù</span>
                    </button>

                    <div v-for="session in sessions" :key="session.id" @click="switchSession(session.id)"
                        class="group flex items-center justify-between w-full rounded-lg px-3 cursor-pointer transition-all duration-300 border h-14 overflow-visible relative"
                        :class="currentSessionId === session.id ? 'bg-gradient-to-br from-[#1E1F20] to-[#2A2B2E] border-blue-500 text-white scale-105 shadow-xl shadow-blue-500/35' : 'border-transparent text-gray-400 hover:bg-gradient-to-br hover:from-[#1E1F20] hover:to-[#2A2B2E] hover:border-blue-500 hover:text-white hover:scale-105 hover:shadow-xl hover:shadow-blue-500/25'">

                        <div class="flex items-center gap-2 overflow-hidden flex-1">
                            <span class="material-icons text-[18px]">chat_bubble_outline</span>
                            <span class="text-base truncate">{{ session.title }}</span>
                        </div>

                        <!-- 3-Dot Menu Button -->
                        <button @click.stop="toggleSessionMenu(session, $event)"
                            class="p-1 rounded-full text-gray-500 hover:text-white hover:bg-white/10 transition-colors z-20">
                            <span class="material-icons text-[18px]">more_vert</span>
                        </button>
                    </div>
                </div>

                <!-- Core Modules ÂØºËà™ - ‰ªÖÂú®‰æßËæπÊ†èÊäòÂè†Êó∂ÊòæÁ§∫ -->
                <nav v-show="isSidebarCollapsed" class="flex-1 overflow-y-auto px-3 py-2 flex flex-col gap-2">

                    <div v-show="!isSidebarCollapsed"
                        class="px-3 text-[10px] font-bold text-gray-500 uppercase tracking-wider mb-1 mt-2">
                        Core Modules
                    </div>

                    <button @click="switchView('chat')"
                        :class="['flex items-center w-full h-12 rounded-lg transition-all duration-200 px-3',
                    isSidebarCollapsed ? 'justify-center' : 'gap-3',
                    currentView==='chat' ? 'bg-[#2A2B2E] text-blue-400 border-l-4 border-blue-400' : 'text-gray-400 hover:bg-[#2A2B2E] hover:text-white']">
                        <span class="material-icons text-[20px]">chat_bubble</span>
                        <span v-show="!isSidebarCollapsed" class="text-sm font-medium whitespace-nowrap truncate">{{
                            currentView === 'chat' ? getCurrentSessionTitle() : 'ÂØπËØùÊ®°Âºè' }}</span>
                    </button>



                    <!-- [Â∑≤ÁßªÈô§] Á≥ªÁªüÈÖçÁΩÆÊåâÈíÆÔºåÂ∑≤ÁßªÂà∞È´òÁ∫ßËÆæÁΩÆ -->
                </nav>

                <div class="mt-auto"></div>

                <div class="px-3 py-4 flex flex-col gap-3 border-t border-[#333] bg-[#1a1b1c]">



                    <button @click="switchView('config')" :class="['flex items-center w-full h-12 rounded-lg transition-all duration-200 px-3 text-gray-400 hover:bg-[#333] hover:text-white',
                    isSidebarCollapsed ? 'justify-center' : 'gap-3',
                    currentView==='config' ? 'bg-[#2A2B2E] text-blue-400' : '']">
                        <span class="material-icons text-[20px]">tune</span>
                        <span v-show="!isSidebarCollapsed" class="text-sm font-medium whitespace-nowrap">È´òÁ∫ßËÆæÁΩÆ</span>
                    </button>
                </div>

                <button @click="switchView('user')" :class="['w-full flex items-center p-4 bg-[#151617] border-t border-[#333] cursor-pointer hover:bg-[#000] transition-colors mb-3', isSidebarCollapsed ? 'justify-center' : 'gap-3',
                    currentView === 'user' ? 'bg-[#2A2B2E]' : '']">
                    <div
                        class="w-9 h-9 rounded-full bg-gradient-to-br from-green-500 to-emerald-700 flex items-center justify-center text-xs font-bold text-white shadow-md shrink-0">
                        {{ currentUser ? currentUser.username.charAt(0).toUpperCase() : 'U' }}</div>
                    <div v-show="!isSidebarCollapsed" class="flex flex-col overflow-hidden text-left">
                        <span class="text-sm font-bold text-white truncate">{{ currentUser ? currentUser.username :
                            'User' }}</span>
                        <span class="text-xs text-gray-500 truncate">{{ isAdmin ? 'ÁÆ°ÁêÜÂëò' : 'ÊôÆÈÄöÁî®Êà∑' }}</span>
                    </div>
                </button>
            </aside>

            <main class="flex-1 flex flex-col h-full relative w-full bg-transparent">
                <header
                    class="md:hidden h-14 flex items-center px-4 bg-[#1E1F20]/90 backdrop-blur-md z-30 justify-between shrink-0 border-b border-[#333] sticky top-0">
                    <button @click="isMobileMenuOpen = !isMobileMenuOpen" class="text-gray-300 p-2 -ml-2"><span
                            class="material-icons text-2xl">menu</span></button>
                    <button @click="goHome"
                        class="font-bold text-base text-transparent bg-clip-text bg-gradient-to-r from-blue-400 via-purple-400 to-pink-400">Memex</button>
                    <span class="w-8"></span>
                </header>

                <div v-show="currentView === 'chat'" class="flex-1 flex flex-col overflow-hidden relative z-30">
                    <!-- Êñá‰ª∂ËæìÂÖ•Ê°ÜÔºàÂÖ®Â±ÄÔºåÁî®‰∫éÁ©∫Áä∂ÊÄÅÔºâ -->
                    <input type="file" ref="fileInput" class="hidden" multiple @change="handleFileUpload">

                    <div class="flex-1 overflow-y-auto w-full scroll-smooth p-8" ref="chatBox" @click="hideKeyboard">
                        <!-- Á©∫Áä∂ÊÄÅÔºöÊ≤°Êúâ‰ºöËØùÊàñÊ≤°ÊúâÈÄâ‰∏≠‰ºöËØù (‰∏î‰∏çÂú®Âä†ËΩΩ‰∏≠) -->
                        <div v-if="(!sessions || sessions.length === 0 || !currentSessionId) && !isChatLoading"
                            class="h-full min-h-[calc(100vh-200px)] flex flex-col items-center justify-center text-gray-100 pb-20 relative overflow-hidden w-full max-w-5xl mx-auto text-center px-6">
                            <!-- ËÉåÊôØÁ≤íÂ≠êÂä®Áîª -->
                            <div class="absolute inset-0 overflow-hidden">
                                <div class="particle" style="--delay: 0s; --duration: 20s; --x: 10%; --y: 20%;"></div>
                                <div class="particle" style="--delay: 2s; --duration: 25s; --x: 30%; --y: 60%;"></div>
                                <div class="particle" style="--delay: 4s; --duration: 18s; --x: 70%; --y: 30%;"></div>
                                <div class="particle" style="--delay: 1s; --duration: 22s; --x: 50%; --y: 80%;"></div>
                                <div class="particle" style="--delay: 3s; --duration: 24s; --x: 90%; --y: 50%;"></div>
                                <div class="particle" style="--delay: 5s; --duration: 19s; --x: 20%; --y: 70%;"></div>
                            </div>

                            <!-- Áº©Â∞è 20% Âπ∂‰∏äÁßª 20%ÔºåÈÅøÂÖçÂÜÖÂÆπËøáÂ§ßËøá‰Ωé -->
                            <div class="relative z-10 transform scale-[0.9] -translate-y-[20%]">
                                <!-- Ê†áÈ¢ò -->
                                <h2
                                    class="text-5xl font-bold mb-4 text-transparent bg-clip-text bg-gradient-to-r from-blue-400 via-purple-400 to-pink-400 animate-gradient">
                                    Memex JARVIS
                                </h2>
                                <p class="text-gray-400 text-lg mb-12 animate-fade-in">
                                    ÊÇ®ÁöÑ‰∏™‰∫∫Êô∫ËÉΩÂä©ÊâãÂ∑≤Â∞±Áª™
                                </p>

                                <!-- ÊèêÁ§∫Âç°Áâá -->
                                <div class="flex flex-wrap justify-center gap-4 max-w-2xl mx-auto">
                                    <div @click="createNewSession"
                                        class="feature-card px-8 py-5 bg-gradient-to-br from-[#1E1F20] to-[#2A2B2E] rounded-2xl border border-[#333] hover:border-blue-500 cursor-pointer transition-all duration-300 hover:scale-105 hover:shadow-xl hover:shadow-blue-500/20 group w-[260px]">
                                        <div class="flex items-center gap-3 justify-center">
                                            <span
                                                class="material-icons text-2x text-blue-400 group-hover:scale-110 transition-transform">add_circle</span>
                                            <span class="text-base font-medium text-gray-200">ÂºÄÂßãÊñ∞ÂØπËØù</span>
                                        </div>
                                    </div>
                                    <div @click="$refs.fileInput.click()"
                                        class="feature-card px-8 py-5 bg-gradient-to-br from-[#1E1F20] to-[#2A2B2E] rounded-2xl border border-[#333] hover:border-purple-500 cursor-pointer transition-all duration-300 hover:scale-105 hover:shadow-xl hover:shadow-purple-500/20 group w-[260px]">
                                        <div class="flex items-center gap-3 justify-center">
                                            <span
                                                class="material-icons text-2xl text-purple-400 group-hover:scale-110 transition-transform">upload_file</span>
                                            <span class="text-base font-medium text-gray-200">‰∏ä‰º†Êñá‰ª∂</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Êúâ‰ºöËØù‰ΩÜÊ∂àÊÅØ‰∏∫Á©∫ÁöÑÁä∂ÊÄÅ -->
                        <div v-else-if="messages && messages.length === 0 && currentSessionId"
                            class="h-full min-h-[calc(100vh-200px)] flex flex-col items-center justify-center text-gray-100 pb-20 relative overflow-hidden w-full max-w-5xl mx-auto text-center px-6">
                            <!-- ËÉåÊôØÁ≤íÂ≠êÂä®ÁîªÔºà‰∏éÁ©∫Áä∂ÊÄÅ‰øùÊåÅ‰∏ÄËá¥Ôºâ -->
                            <div class="absolute inset-0 overflow-hidden">
                                <div class="particle" style="--delay: 0s; --duration: 20s; --x: 10%; --y: 20%;"></div>
                                <div class="particle" style="--delay: 2s; --duration: 25s; --x: 30%; --y: 60%;"></div>
                                <div class="particle" style="--delay: 4s; --duration: 18s; --x: 70%; --y: 30%;"></div>
                                <div class="particle" style="--delay: 1s; --duration: 22s; --x: 50%; --y: 80%;"></div>
                                <div class="particle" style="--delay: 3s; --duration: 24s; --x: 90%; --y: 50%;"></div>
                                <div class="particle" style="--delay: 5s; --duration: 19s; --x: 20%; --y: 70%;"></div>
                            </div>

                            <!-- Á©∫ÁôΩÂç†‰ΩçÔºöÁßªÈô§ÊñáÊ°à‰∏éÁ§∫‰æãÊèêÁ§∫ -->
                            <div class="relative z-10 transform scale-[0.9] -translate-y-[20%]"></div>
                        </div>

                        <!-- Ê∂àÊÅØÂàóË°® - Âè™Âú®Êúâ‰ºöËØùÊó∂ÊòæÁ§∫ -->
                        <template v-if="currentSessionId && sessions && sessions.length > 0">
                            <!-- Loading Spinner -->
                            <div v-if="isChatLoading" class="flex justify-center items-center h-full min-h-[200px]">
                                <div class="animate-spin rounded-full h-10 w-10 border-t-2 border-b-2 border-blue-500">
                                </div>
                            </div>

                            <div v-else v-for="(msg, index) in messages" :key="index"
                                :class="['w-full mb-10 flex group', msg.role === 'assistant' ? 'justify-start' : 'justify-end']">
                                <div
                                    :class="['max-w-[90%] md:max-w-[75%] break-all overflow-hidden transition-all duration-300', 
                                 msg.role === 'assistant' ? 'bg-transparent text-gray-100 pl-0 py-1' : 'bg-[#2f2f2f] text-white rounded-[18px] py-1.5 px-4 shadow-sm']">
                                    <div v-if="msg.type === 'text'" class="markdown-body"
                                        v-html="renderMarkdown(msg.content)">
                                    </div>
                                    <div v-if="msg.type === 'file'"
                                        class="flex items-center gap-3 bg-black/20 p-3 rounded-lg mt-2 border border-white/10">
                                        <span class="material-icons text-2xl opacity-80">description</span>
                                        <div>
                                            <div class="font-bold truncate text-sm">{{ msg.filename }}</div>
                                            <div class="text-xs opacity-80 mt-1">{{ msg.status }}</div>
                                        </div>
                                    </div>
                                </div>
                                <!-- Audio Button -->
                                <button v-if="msg.role === 'assistant'" @click="playMessageAudio(msg.content)"
                                    class="self-end mb-6 ml-2 p-1 text-gray-600 hover:text-blue-400 opacity-0 group-hover:opacity-100 transition-opacity">
                                    <span class="material-icons text-base">volume_up</span>
                                </button>
                                <!-- Thumbs Down Button -->
                                <button v-if="msg.role === 'assistant'" @click="openFeedbackModal(msg)"
                                    class="self-end mb-6 ml-2 p-1 text-gray-600 hover:text-red-400 opacity-0 group-hover:opacity-100 transition-opacity">
                                    <span class="material-icons text-base">thumb_down</span>
                                </button>
                            </div>

                            <div v-if="isThinking" class="ml-4 mb-4 text-gray-500 animate-pulse">Thinking...</div>
                        </template>
                    </div>

                    <!-- ËæìÂÖ•Ê°ÜÂå∫Âüü - Âè™Âú®Êúâ‰ºöËØùÊó∂ÊòæÁ§∫ -->
                    <div v-if="currentSessionId && sessions && sessions.length > 0"
                        class="shrink-0 p-4 md:p-6 bg-[#131314]">
                        <!-- [Êñ∞Â¢û] Ê®°ÂûãÈÄâÊã©Âô® - ÂèÇËÄÉ Gemini ËÆæËÆ°ÔºåÊîæÂú®ËæìÂÖ•Ê°Ü‰∏äÊñπ -->
                        <div class="max-w-4xl mx-auto mb-2 flex items-center justify-end">
                            <div class="relative group">
                                <button @click="showModelSelector = !showModelSelector"
                                    class="flex items-center gap-2 px-3 py-1.5 text-xs text-gray-500 hover:text-white hover:bg-[#2A2B2E] rounded-lg transition-colors relative z-50">
                                    <span class="material-icons text-base text-purple-400">auto_awesome</span>
                                    <span>{{ getModelDisplayName(currentModel) }}</span>
                                    <span class="material-icons text-xs">expand_more</span>
                                </button>

                                <!-- Model Selector Backdrop -->
                                <div v-if="showModelSelector" @click="showModelSelector = false"
                                    class="fixed inset-0 z-40 bg-transparent cursor-default"></div>

                                <!-- Ê®°ÂûãÈÄâÊã©‰∏ãÊãâËèúÂçï -->
                                <div v-show="showModelSelector"
                                    class="absolute bottom-full right-0 mb-2 w-64 bg-[#1E1F20] border border-[#333] rounded-xl shadow-2xl overflow-hidden z-50">
                                    <div class="p-2">
                                        <div class="px-3 py-2 text-xs text-gray-500 uppercase">ÈÄâÊã©Ê®°Âûã</div>
                                        <div v-for="model in availableModels" :key="model.value"
                                            @click="currentModel = model.value; showModelSelector = false"
                                            :class="['flex items-center gap-3 px-3 py-2 rounded-lg cursor-pointer transition-colors',
                                            currentModel === model.value ? 'bg-[#2A2B2E] text-blue-400' : 'text-gray-300 hover:bg-[#2A2B2E] hover:text-white']">
                                            <span class="material-icons text-lg" :class="model.iconColor">{{ model.icon
                                                }}</span>
                                            <div class="flex-1">
                                                <div class="text-sm font-medium">{{ model.name }}</div>
                                                <div class="text-xs text-gray-500">{{ model.description }}</div>
                                            </div>
                                            <span v-if="currentModel === model.value"
                                                class="material-icons text-sm text-blue-400">check</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div
                            class="max-w-4xl mx-auto relative bg-[#1E1F20] rounded-[24px] border border-[#333] flex items-center p-2 md:p-3 shadow-2xl mb-2 md:mb-6 mx-4 md:mx-auto gap-1">

                            <!-- ËØ≠Èü≥/ÊñáÂ≠óÂàáÊç¢ÊåâÈíÆ -->
                            <button @click="isVoiceMode = !isVoiceMode"
                                :class="['shrink-0 w-10 h-10 rounded-xl transition-all duration-300 flex items-center justify-center', 
                                    isVoiceMode ? 'bg-blue-500/20 text-blue-400' : 'text-gray-400 hover:text-white hover:bg-[#333]']">
                                <span class="material-icons text-xl">{{ isVoiceMode ? 'keyboard' : 'mic' }}</span>
                            </button>

                            <!-- Êñá‰ª∂‰∏ä‰º†ÊåâÈíÆ -->
                            <button @click="$refs.fileInput.click()"
                                class="shrink-0 w-10 h-10 text-gray-400 hover:text-white hover:bg-[#333] rounded-xl transition-colors flex items-center justify-center">
                                <span class="material-icons text-xl">add_circle</span>
                            </button>
                            <input type="file" ref="fileInput" class="hidden" multiple @change="handleFileUpload">

                            <!-- ÊñáÂ≠óËæìÂÖ•Ê®°Âºè -->
                            <template v-if="!isVoiceMode">
                                <textarea v-model="inputVal" @keydown.enter.prevent="handleEnter" rows="1"
                                    placeholder="ËæìÂÖ•Ê∂àÊÅØ..."
                                    class="flex-1 min-w-0 bg-transparent text-gray-200 placeholder-gray-500 px-3 py-2 outline-none resize-none max-h-[120px] overflow-y-auto scrollbar-hide text-base leading-6"></textarea>
                                <button @click="sendText"
                                    class="shrink-0 w-10 h-10 bg-blue-600 hover:bg-blue-500 text-white rounded-xl shadow-lg transition-colors flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed"
                                    :disabled="!inputVal">
                                    <span class="material-icons text-lg">arrow_upward</span>
                                </button>
                            </template>

                            <!-- ËØ≠Èü≥ËæìÂÖ•Ê®°Âºè (WeChat-style) -->
                            <template v-else>
                                <div class="flex-1 min-w-0">
                                    <!-- Êåâ‰ΩèËØ¥ËØùÊåâÈíÆ -->
                                    <button @mousedown="toggleVoiceRecording" @mouseup="toggleVoiceRecording"
                                        @mouseleave="isRecording && toggleVoiceRecording()"
                                        @touchstart.prevent="toggleVoiceRecording"
                                        @touchend.prevent="toggleVoiceRecording"
                                        @touchcancel="isRecording && toggleVoiceRecording()"
                                        :class="['w-full py-2.5 px-4 rounded-xl font-medium text-sm transition-all duration-200 select-none',
                                            isRecording 
                                                ? 'bg-red-500/30 text-red-400 border-2 border-red-500/50 animate-pulse' 
                                                : 'bg-[#2A2B2E] text-gray-300 hover:bg-[#333] border-2 border-transparent']">
                                        <div class="flex items-center justify-center gap-2">
                                            <span class="material-icons text-lg"
                                                :class="isRecording ? 'animate-bounce' : ''">
                                                {{ isRecording ? 'graphic_eq' : 'mic' }}
                                            </span>
                                            <span>{{ isRecording ? 'ÊùæÂºÄ ÂèëÈÄÅ' : 'Êåâ‰Ωè ËØ¥ËØù' }}</span>
                                        </div>
                                    </button>
                                </div>
                            </template>
                        </div>

                        <!-- ÂΩïÈü≥Áä∂ÊÄÅÊèêÁ§∫ÊµÆÂ±Ç -->
                        <div v-if="isRecording"
                            class="fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center pointer-events-none">
                            <div class="bg-[#1E1F20] rounded-2xl p-8 shadow-2xl border border-[#333] text-center">
                                <div class="text-6xl mb-4 animate-pulse">üé§</div>
                                <div class="text-white text-lg font-medium mb-2">Ê≠£Âú®ÂΩïÈü≥...</div>
                                <div class="text-gray-400 text-sm">ÊùæÂºÄÂèëÈÄÅÔºå‰∏äÊªëÂèñÊ∂à</div>
                                <div class="mt-4 flex justify-center">
                                    <div class="flex gap-1">
                                        <span
                                            class="w-1 h-6 bg-red-500 rounded-full animate-[soundwave_0.5s_ease-in-out_infinite]"></span>
                                        <span
                                            class="w-1 h-8 bg-red-500 rounded-full animate-[soundwave_0.5s_ease-in-out_infinite_0.1s]"></span>
                                        <span
                                            class="w-1 h-4 bg-red-500 rounded-full animate-[soundwave_0.5s_ease-in-out_infinite_0.2s]"></span>
                                        <span
                                            class="w-1 h-10 bg-red-500 rounded-full animate-[soundwave_0.5s_ease-in-out_infinite_0.3s]"></span>
                                        <span
                                            class="w-1 h-6 bg-red-500 rounded-full animate-[soundwave_0.5s_ease-in-out_infinite_0.4s]"></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- [Â∑≤ÁßªÈô§] ÂÆûÊó∂ÁªàÁ´ØÁã¨Á´ãËßÜÂõæÔºåÂ∑≤ÁßªÂà∞È´òÁ∫ßËÆæÁΩÆÈ°µÈù¢ -->

                <!-- ÈÖçÁΩÆÈ°µÈù¢Ôºà‰æßËæπÊ†èÂØºËà™Â∏ÉÂ±ÄÔºâ -->
                <!-- È´òÁ∫ßËÆæÁΩÆ - ‰Ωú‰∏∫Ë¶ÜÁõñÂ±ÇÊòæÁ§∫ -->
                <div v-show="currentView === 'config'"
                    class="absolute inset-0 bg-[#131314] flex flex-col md:flex-row overflow-hidden z-40">

                    <!-- Mobile Header for Config -->
                    <header
                        class="md:hidden h-14 bg-[#1E1F20] border-b border-[#333] flex items-center px-4 shrink-0 z-50">
                        <button @click="toggleConfigSidebar" class="text-gray-300 p-2 -ml-2">
                            <span class="material-icons">menu</span>
                        </button>
                        <span class="font-bold text-white ml-2">È´òÁ∫ßËÆæÁΩÆ</span>
                        <div class="ml-auto">
                            <button @click="switchView('chat')" class="text-gray-400 p-2">
                                <span class="material-icons">close</span>
                            </button>
                        </div>
                    </header>

                    <!-- Mobile Backdrop -->
                    <div v-show="isConfigSidebarOpen" @click="isConfigSidebarOpen = false"
                        class="fixed inset-0 bg-black/60 backdrop-blur-sm z-40 md:hidden transition-opacity">
                    </div>

                    <!-- Â∑¶‰æßÂØºËà™Ê†è -->
                    <div :class="['bg-[#1E1F20] border-r border-[#333] flex flex-col overflow-y-auto transition-transform duration-300 z-50 fixed md:relative h-full w-[260px] md:w-64',
                        isConfigSidebarOpen ? 'translate-x-0' : '-translate-x-full md:translate-x-0']">
                        <div class="p-4 border-b border-[#333]">
                            <h2 class="text-lg font-bold text-white flex items-center gap-2">
                                <span class="material-icons text-blue-500">settings</span>
                                È´òÁ∫ßËÆæÁΩÆ
                            </h2>
                        </div>
                        <nav class="flex-1 p-2 space-y-1 overflow-y-auto">
                            <!-- [Êñ∞Â¢û] ËøîÂõûËÅäÂ§© (Desktop only) -->
                            <button @click="switchView('chat')"
                                class="w-full flex items-center gap-3 px-4 py-3 rounded-lg text-gray-400 hover:bg-[#2A2B2E] hover:text-white transition-colors mb-2 bg-[#1E1F20] border border-[#333]">
                                <span class="material-icons text-lg">arrow_back</span>
                                <span class="font-bold">ËøîÂõûÂØπËØù</span>
                            </button>

                            <!-- ========================================== -->
                            <!-- Group 1: Êï∞ÊçÆÁÆ°ÁêÜ (Data Management) -->
                            <!-- ========================================== -->
                            <div class="mb-1">
                                <button @click="toggleGroup('data')"
                                    class="w-full flex items-center justify-between px-3 py-2 text-sm font-bold text-gray-500 uppercase tracking-wider hover:text-gray-300 transition-colors">
                                    <span>Êï∞ÊçÆÁÆ°ÁêÜ</span>
                                    <span class="material-icons text-sm transition-transform duration-200"
                                        :class="expandedGroups.data ? 'rotate-180' : ''">expand_more</span>
                                </button>
                                <div v-show="expandedGroups.data"
                                    class="space-y-1 pl-2 border-l border-[#333] ml-4 mt-1">
                                    <button @click="switchConfigPanel('dashboard')"
                                        :class="['w-full flex items-center gap-3 px-3 py-2 rounded-lg transition-colors text-left text-sm',
                                        configPanel === 'dashboard' ? 'bg-[#2A2B2E] text-blue-400' : 'text-gray-400 hover:bg-[#2A2B2E] hover:text-white']">
                                        <span class="material-icons text-lg">dashboard</span>
                                        <span>ÁúãÊùøÁªüËÆ°</span>
                                    </button>
                                    <button @click="switchConfigPanel('archives')"
                                        :class="['w-full flex items-center gap-3 px-3 py-2 rounded-lg transition-colors text-left text-sm',
                                         configPanel === 'archives' ? 'bg-[#2A2B2E] text-cyan-400' : 'text-gray-400 hover:bg-[#2A2B2E] hover:text-white']">
                                        <span class="material-icons text-lg">folder_shared</span>
                                        <span>Áü•ËØÜÂ∫ì</span>
                                    </button>

                                </div>
                            </div>

                            <!-- ========================================== -->
                            <!-- Group 2: Ê®°ÂûãÊ±† (Model Pool) -->
                            <!-- ========================================== -->
                            <div class="mb-1">
                                <button @click="toggleGroup('models')"
                                    class="w-full flex items-center justify-between px-3 py-2 text-sm font-bold text-gray-500 uppercase tracking-wider hover:text-gray-300 transition-colors">
                                    <span>Ê®°ÂûãÊ±†</span>
                                    <span class="material-icons text-sm transition-transform duration-200"
                                        :class="expandedGroups.models ? 'rotate-180' : ''">expand_more</span>
                                </button>
                                <div v-show="expandedGroups.models"
                                    class="space-y-1 pl-2 border-l border-[#333] ml-4 mt-1">
                                    <button @click="switchConfigPanel('router')"
                                        :class="['w-full flex items-center gap-3 px-3 py-2 rounded-lg transition-colors text-left text-sm',
                                        configPanel === 'router' ? 'bg-[#2A2B2E] text-purple-400' : 'text-gray-400 hover:bg-[#2A2B2E] hover:text-white']">
                                        <span class="material-icons text-lg">router</span>
                                        <span>Ë∑ØÁî±Ê®°Âûã</span>
                                    </button>
                                    <button @click="switchConfigPanel('reasoning')"
                                        :class="['w-full flex items-center gap-3 px-3 py-2 rounded-lg transition-colors text-left text-sm',
                                        configPanel === 'reasoning' ? 'bg-[#2A2B2E] text-blue-400' : 'text-gray-400 hover:bg-[#2A2B2E] hover:text-white']">
                                        <span class="material-icons text-lg">psychology</span>
                                        <span>Êé®ÁêÜÊ®°Âûã</span>
                                    </button>
                                    <button @click="switchConfigPanel('vision')"
                                        :class="['w-full flex items-center gap-3 px-3 py-2 rounded-lg transition-colors text-left text-sm',
                                        configPanel === 'vision' ? 'bg-[#2A2B2E] text-blue-400' : 'text-gray-400 hover:bg-[#2A2B2E] hover:text-white']">
                                        <span class="material-icons text-lg">visibility</span>
                                        <span>ËßÜËßâÊ®°Âûã</span>
                                    </button>
                                    <button @click="switchConfigPanel('voice')"
                                        :class="['w-full flex items-center gap-3 px-3 py-2 rounded-lg transition-colors text-left text-sm',
                                        configPanel === 'voice' ? 'bg-[#2A2B2E] text-green-400' : 'text-gray-400 hover:bg-[#2A2B2E] hover:text-white']">
                                        <span class="material-icons text-lg">record_voice_over</span>
                                        <span>ËØ≠Èü≥Ê®°Âûã</span>
                                    </button>
                                    <button @click="switchConfigPanel('hearing')"
                                        :class="['w-full flex items-center gap-3 px-3 py-2 rounded-lg transition-colors text-left text-sm',
                                        configPanel === 'hearing' ? 'bg-[#2A2B2E] text-blue-400' : 'text-gray-400 hover:bg-[#2A2B2E] hover:text-white']">
                                        <span class="material-icons text-lg">hearing</span>
                                        <span>Âê¨ËßâÊ®°Âûã</span>
                                    </button>
                                    <button @click="switchConfigPanel('memory')"
                                        :class="['w-full flex items-center gap-3 px-3 py-2 rounded-lg transition-colors text-left text-sm',
                                        configPanel === 'memory' ? 'bg-[#2A2B2E] text-blue-400' : 'text-gray-400 hover:bg-[#2A2B2E] hover:text-white']">
                                        <span class="material-icons text-lg">memory</span>
                                        <span>ËÆ∞ÂøÜÊ®°Âûã</span>
                                    </button>
                                </div>
                            </div>

                            <!-- ========================================== -->
                            <!-- Group 3: Á≥ªÁªü (System) -->
                            <!-- ========================================== -->
                            <div class="mb-1">
                                <button @click="toggleGroup('system')"
                                    class="w-full flex items-center justify-between px-3 py-2 text-sm font-bold text-gray-500 uppercase tracking-wider hover:text-gray-300 transition-colors">
                                    <span>Á≥ªÁªü</span>
                                    <span class="material-icons text-sm transition-transform duration-200"
                                        :class="expandedGroups.system ? 'rotate-180' : ''">expand_more</span>
                                </button>
                                <div v-show="expandedGroups.system"
                                    class="space-y-1 pl-2 border-l border-[#333] ml-4 mt-1">
                                    <button @click="switchConfigPanel('storage')"
                                        :class="['w-full flex items-center gap-3 px-3 py-2 rounded-lg transition-colors text-left text-sm',
                                        configPanel === 'storage' ? 'bg-[#2A2B2E] text-orange-400' : 'text-gray-400 hover:bg-[#2A2B2E] hover:text-white']">
                                        <span class="material-icons text-lg">inventory_2</span>
                                        <span>Â≠òÂÇ®ÁÆ°ÁêÜ</span>
                                    </button>
                                    <button @click="switchConfigPanel('prompts')"
                                        :class="['w-full flex items-center gap-3 px-3 py-2 rounded-lg transition-colors text-left text-sm',
                                        configPanel === 'prompts' ? 'bg-[#2A2B2E] text-pink-400' : 'text-gray-400 hover:bg-[#2A2B2E] hover:text-white']">
                                        <span class="material-icons text-lg">science</span>
                                        <span>ÊèêÁ§∫ËØçÂÆûÈ™åÂÆ§</span>
                                    </button>
                                    <button @click="switchConfigPanel('logs')"
                                        :class="['w-full flex items-center gap-3 px-3 py-2 rounded-lg transition-colors text-left text-sm',
                                        configPanel === 'logs' ? 'bg-[#2A2B2E] text-yellow-400' : 'text-gray-400 hover:bg-[#2A2B2E] hover:text-white']">
                                        <span class="material-icons text-lg">terminal</span>
                                        <span>Á≥ªÁªüÊó•Âøó</span>
                                    </button>
                                    <button @click="switchConfigPanel('database')"
                                        :class="['w-full flex items-center gap-3 px-3 py-2 rounded-lg transition-colors text-left text-sm',
                                        configPanel === 'database' ? 'bg-[#2A2B2E] text-blue-400' : 'text-gray-400 hover:bg-[#2A2B2E] hover:text-white']">
                                        <span class="material-icons text-lg">storage</span>
                                        <span>Êï∞ÊçÆÂ∫ì</span>
                                    </button>
                                    <button @click="switchConfigPanel('system-controls')"
                                        :class="['w-full flex items-center gap-3 px-3 py-2 rounded-lg transition-colors text-left text-sm',
                                        configPanel === 'system-controls' ? 'bg-[#2A2B2E] text-green-400' : 'text-gray-400 hover:bg-[#2A2B2E] hover:text-white']">
                                        <span class="material-icons text-lg">tune</span>
                                        <span>Á≥ªÁªüÊéßÂà∂</span>
                                    </button>

                                    <!-- Dynamic Schema Panels (Sidebar) -->
                                    <button v-for="group in sidebarConfigGroups" :key="group.id"
                                        @click="configPanel = group.id"
                                        :class="['w-full flex items-center gap-3 px-3 py-2 rounded-lg transition-colors text-left text-sm',
                                        configPanel === group.id ? 'bg-[#2A2B2E] text-blue-400' : 'text-gray-400 hover:bg-[#2A2B2E] hover:text-white']">
                                        <span class="material-icons text-lg">{{ group.icon || 'settings' }}</span>
                                        <span>{{ group.title }}</span>
                                    </button>
                                </div>
                            </div>
                        </nav>

                    </div>

                    <!-- Âè≥‰æßÂÜÖÂÆπÂå∫ -->
                    <div class="flex-1 overflow-y-auto">
                        <div class="max-w-7xl mx-auto p-6 space-y-6">
                            <!-- È°µÈù¢Ê†áÈ¢òÊ†è -->
                            <div class="flex items-center justify-between mb-6">
                                <h1 class="text-2xl font-bold text-white">
                                    {{ getPanelTitle(configPanel) }}
                                </h1>
                                <div class="flex items-center gap-3">
                                    <span v-if="configSaveStatus === 'success'"
                                        class="text-green-400 text-sm flex items-center gap-1">
                                        <span class="material-icons text-sm">check_circle</span> ‰øùÂ≠òÊàêÂäü
                                    </span>
                                    <span v-if="configSaveStatus === 'error'"
                                        class="text-red-400 text-sm flex items-center gap-1">
                                        <span class="material-icons text-sm">error</span> ‰øùÂ≠òÂ§±Ë¥•
                                    </span>
                                </div>
                            </div>

                            <!-- ÁúãÊùøÁªüËÆ° -->
                            <div v-show="configPanel === 'dashboard'" class="space-y-6 animate-fade-in">
                                <!-- KPI Cards -->
                                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                                    <!-- Total Archives -->
                                    <div class="p-6 rounded-2xl bg-[#1E1F20] border border-[#333]">
                                        <div class="flex items-center justify-between mb-4">
                                            <span class="text-gray-400 text-sm font-medium">ÂΩíÊ°£ÊÄªÊï∞</span>
                                            <span
                                                class="material-icons text-blue-500 bg-blue-500/10 p-2 rounded-lg">folder</span>
                                        </div>
                                        <div class="text-3xl font-bold text-white">{{
                                            dashboardStats.summary.total_archives }}</div>
                                        <div class="text-xs text-gray-500 mt-2">ËæÉÊò®Êó• +0%</div>
                                    </div>

                                    <!-- Vector Coverage -->
                                    <div class="p-6 rounded-2xl bg-[#1E1F20] border border-[#333]">
                                        <div class="flex items-center justify-between mb-4">
                                            <span class="text-gray-400 text-sm font-medium">ÂêëÈáèÂåñË¶ÜÁõñÁéá</span>
                                            <span
                                                class="material-icons text-green-500 bg-green-500/10 p-2 rounded-lg">hub</span>
                                        </div>
                                        <div class="text-3xl font-bold text-white">{{
                                            dashboardStats.summary.vector_coverage }}%</div>
                                        <div class="w-full bg-[#333] h-1.5 rounded-full mt-3 overflow-hidden">
                                            <div class="bg-green-500 h-full rounded-full transition-all duration-1000"
                                                :style="{ width: dashboardStats.summary.vector_coverage + '%' }"></div>
                                        </div>
                                    </div>

                                    <!-- Pending Proposals -->
                                    <div
                                        class="p-6 rounded-2xl bg-[#1E1F20] border border-[#333] ring-1 ring-purple-500/50">
                                        <div class="flex items-center justify-between mb-4">
                                            <span class="text-purple-400 text-sm font-medium">ÂæÖÂ§ÑÁêÜÊèêÊ°à</span>
                                            <span
                                                class="material-icons text-purple-500 bg-purple-500/10 p-2 rounded-lg">psychology</span>
                                        </div>
                                        <div class="text-3xl font-bold text-white">{{
                                            dashboardStats.summary.pending_proposals }}</div>
                                        <div class="text-xs text-purple-300 mt-2">ÈúÄË¶ÅÂÖ≥Ê≥®</div>
                                    </div>
                                </div>

                                <!-- Charts Section -->
                                <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                                    <!-- Line Chart -->
                                    <div class="lg:col-span-2 p-6 rounded-2xl bg-[#1E1F20] border border-[#333]">
                                        <h3 class="text-lg font-bold text-white mb-6">Ê¥ªË∑ÉÂ∫¶ (Ëøë30Â§©)</h3>
                                        <div class="h-64">
                                            <canvas id="dashboardActivityChart"></canvas>
                                        </div>
                                    </div>
                                    <!-- Doughnut Chart -->
                                    <div class="p-6 rounded-2xl bg-[#1E1F20] border border-[#333]">
                                        <h3 class="text-lg font-bold text-white mb-6">Êñá‰ª∂Á±ªÂûãÂàÜÂ∏É</h3>
                                        <div class="h-64 flex items-center justify-center">
                                            <canvas id="dashboardTypeChart"></canvas>
                                        </div>
                                    </div>
                                </div>

                                <!-- Proposals List -->
                                <div class="rounded-2xl overflow-hidden bg-[#1E1F20] border border-[#333]">
                                    <div class="p-6 border-b border-[#333] flex items-center justify-between">
                                        <h3 class="text-lg font-bold text-white">Âõ≠‰∏ÅÊèêÊ°à (Gardener)</h3>
                                        <span
                                            class="bg-purple-500/20 text-purple-300 px-3 py-1 rounded-full text-xs font-bold">{{
                                            dashboardProposals && dashboardProposals.length }} ÂæÖÂ§ÑÁêÜ</span>
                                    </div>

                                    <div v-if="!dashboardProposals || dashboardProposals.length === 0"
                                        class="p-12 text-center text-gray-500">
                                        <span class="material-icons text-4xl mb-2 opacity-50">check_circle</span>
                                        <p>Â§™Ê£í‰∫ÜÔºÅÊâÄÊúâÊèêÊ°àÈÉΩÂ∑≤Â§ÑÁêÜÂÆåÊØï„ÄÇ</p>
                                    </div>

                                    <div v-else class="divide-y divide-[#333]">
                                        <div v-for="proposal in dashboardProposals" :key="proposal.id"
                                            class="p-6 hover:bg-[#2A2B2E]/50 transition-colors">
                                            <div class="flex items-start justify-between gap-6">
                                                <div class="flex gap-4">
                                                    <div class="mt-1">
                                                        <div
                                                            class="w-10 h-10 rounded-full bg-blue-500/20 text-blue-400 flex items-center justify-center">
                                                            <span class="material-icons">auto_fix_high</span>
                                                        </div>
                                                    </div>
                                                    <div>
                                                        <div class="flex items-center gap-3 mb-1">
                                                            <span class="font-bold text-white text-lg">{{ proposal.type
                                                                }}</span>
                                                            <span class="text-xs text-gray-500">{{ new
                                                                Date(proposal.created_at).toLocaleString() }}</span>
                                                        </div>
                                                        <p class="text-gray-300 mb-3">{{ proposal.reasoning }}</p>
                                                        <div
                                                            class="bg-[#131314] rounded-lg p-3 border border-[#333] text-sm text-gray-400 font-mono">
                                                            {{ proposal.content }}
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="flex gap-2 shrink-0">
                                                    <button @click="rejectProposal(proposal.id)"
                                                        class="px-4 py-2 border border-red-500/50 text-red-400 hover:bg-red-500/10 rounded-lg text-sm transition-colors">
                                                        ÊãíÁªù
                                                    </button>
                                                    <button @click="approveProposal(proposal.id)"
                                                        class="px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white rounded-lg text-sm shadow-lg shadow-blue-500/20 transition-colors">
                                                        ÊâπÂáÜ
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Áü•ËØÜÂ∫ì (Archives) - Áâ©ÁêÜÊñá‰ª∂ÊµèËßàÂô® -->
                            <div v-if="configPanel === 'archives'" class="space-y-6 animate-fade-in">
                                <div class="flex items-center justify-between mb-4">
                                    <div>
                                        <h2 class="text-xl font-bold text-white flex items-center gap-2 mb-1">
                                            <span class="material-icons text-cyan-400">folder_shared</span>
                                            Áü•ËØÜÂ∫ì (Knowledge Base)
                                        </h2>
                                        <p class="text-sm text-gray-400">ÁÆ°ÁêÜÂ∑≤ÂΩíÊ°£ÁöÑÊñá‰ª∂ÂíåÁü•ËØÜ</p>
                                    </div>
                                    <button @click="fetchUserStorageLocations(); fetchArchives();"
                                        class="px-3 py-2 glass-input hover:bg-white/10 text-white rounded-lg text-sm flex items-center gap-2">
                                        <span class="material-icons text-sm">refresh</span> Âà∑Êñ∞
                                    </button>
                                </div>

                                <!-- ÊúÄËøë‰∏ä‰º† (Recent Uploads) Cards -->
                                <div v-if="archives && archives.length > 0">
                                    <h3
                                        class="text-xs font-bold text-gray-500 uppercase tracking-wider mb-3 flex items-center gap-2">
                                        <span class="material-icons text-sm">schedule</span> ÊúÄËøë‰∏ä‰º†
                                    </h3>
                                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                                        <div v-for="archive in archives.slice(0, 8)" :key="'recent-' + archive.id"
                                            @click="openArchiveDrawer(archive)"
                                            class="glass-panel rounded-xl p-4 hover:bg-white/5 transition-all cursor-pointer border-transparent hover:border-cyan-500/30 group">
                                            <div class="flex items-start justify-between mb-2">
                                                <span class="material-icons text-2xl"
                                                    :class="getFileTypeIcon(archive.filename).color">
                                                    {{ getFileTypeIcon(archive.filename).icon }}
                                                </span>
                                                <span
                                                    class="text-[10px] px-1.5 py-0.5 rounded bg-gray-800 text-gray-400 font-mono">
                                                    #{{ archive.id }}
                                                </span>
                                            </div>
                                            <h4 class="text-sm font-bold text-white truncate mb-1"
                                                :title="archive.filename">
                                                {{ archive.filename }}
                                            </h4>
                                            <p class="text-xs text-gray-500 truncate mb-2">{{ archive.category ||
                                                'Uncategorized' }}</p>
                                            <div class="flex items-center justify-between text-[10px] text-gray-600">
                                                <span>{{ new Date(archive.created_at).toLocaleDateString() }}</span>
                                                <span
                                                    :class="{'text-green-500': archive.status === 'archived', 'text-yellow-500': archive.status !== 'archived'}">
                                                    {{ archive.status }}
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Êñá‰ª∂ÊµèËßàÂô®Ê†áÈ¢ò -->
                                <div class="flex items-center gap-2 mt-8">
                                    <span class="material-icons text-cyan-400">folder_open</span>
                                    <h3 class="text-sm font-bold text-gray-400 uppercase tracking-wider">Êñá‰ª∂ÊµèËßàÂô®</h3>
                                </div>

                                <!-- Â≠òÂÇ®‰ΩçÁΩÆÈÄâÊã©Âô® -->
                                <div class="glass-panel rounded-xl p-6"
                                    v-if="userStorageLocations && userStorageLocations.length > 0">
                                    <h3 class="text-sm font-bold text-gray-400 uppercase tracking-wider mb-3">Â≠òÂÇ®‰ΩçÁΩÆ</h3>
                                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3">
                                        <div v-for="location in userStorageLocations" :key="location.path"
                                            @click="navigateToStorageRoot(location)"
                                            class="bg-[#1E1F20] border border-[#333] rounded-lg p-4 cursor-pointer hover:border-cyan-500/50 hover:bg-[#2A2B2E] transition-all">
                                            <div class="flex items-center gap-3">
                                                <span class="material-icons text-2xl text-cyan-400">storage</span>
                                                <div class="flex-1 min-w-0">
                                                    <p class="font-bold text-white truncate">[{{ location.rootName }}]
                                                    </p>
                                                    <p class="text-xs text-gray-400 truncate">{{ location.path }}</p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Èù¢ÂåÖÂ±ëÂØºËà™ -->
                                <div v-if="currentBrowseRoot"
                                    class="flex items-center gap-2 text-sm glass-panel rounded-lg p-3">
                                    <span class="material-icons text-cyan-400">folder_open</span>
                                    <span @click="navigateToBreadcrumb(-1)"
                                        class="cursor-pointer hover:text-cyan-400 transition-colors font-medium">
                                        {{ currentBrowseRoot }}
                                    </span>
                                    <template v-for="(part, i) in pathParts" :key="i">
                                        <span class="text-gray-600">/</span>
                                        <span @click="navigateToBreadcrumb(i)"
                                            class="cursor-pointer hover:text-cyan-400 transition-colors">
                                            {{ part }}
                                        </span>
                                    </template>
                                </div>

                                <!-- Â∑•ÂÖ∑Ê†è -->
                                <div v-if="currentBrowseRoot" class="flex items-center justify-between">
                                    <button @click="navigateUp" :disabled="pathParts.length === 0"
                                        class="px-4 py-2 bg-[#2A2B2E] hover:bg-[#333] text-white rounded-lg text-sm flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors">
                                        <span class="material-icons text-sm">arrow_upward</span> ‰∏äÁ∫ßÁõÆÂΩï
                                    </button>

                                    <div v-if="selectedFiles.size > 0"
                                        class="flex items-center gap-3 bg-red-900/20 border border-red-500/50 rounded-lg px-4 py-2">
                                        <span class="text-white text-sm">Â∑≤ÈÄâÊã© <span class="font-bold">{{
                                                selectedFiles.size }}</span> È°π</span>
                                        <button @click="batchDeleteFiles"
                                            class="px-3 py-1.5 bg-red-600 hover:bg-red-700 text-white rounded text-sm flex items-center gap-1.5 transition-colors">
                                            <span class="material-icons text-sm">delete</span> ÊâπÈáèÂà†Èô§
                                        </button>
                                    </div>
                                </div>

                                <!-- Êñá‰ª∂ÂàóË°®Ë°®Ê†º -->
                                <div v-if="currentBrowseRoot" class="glass-panel rounded-xl overflow-hidden">
                                    <table class="w-full">
                                        <thead class="bg-black/40 border-b border-[#333]">
                                            <tr>
                                                <th class="p-3 w-10 text-left">
                                                    <input type="checkbox"
                                                        @change="toggleSelectAll($event.target.checked)"
                                                        class="rounded bg-[#131314] border-[#333] text-cyan-500 focus:ring-cyan-500">
                                                </th>
                                                <th class="p-3 text-left cursor-pointer hover:bg-white/5 transition-colors"
                                                    @click="sortFileList('name')">
                                                    <div class="flex items-center gap-2">
                                                        <span
                                                            class="text-xs font-bold text-gray-400 uppercase">ÂêçÁß∞</span>
                                                        <span v-if="fileSortBy === 'name'"
                                                            class="material-icons text-xs text-cyan-400">
                                                            {{ fileSortAsc ? 'arrow_drop_down' : 'arrow_drop_up' }}
                                                        </span>
                                                    </div>
                                                </th>
                                                <th class="p-3 text-left cursor-pointer hover:bg-white/5 transition-colors"
                                                    @click="sortFileList('modified')">
                                                    <div class="flex items-center gap-2">
                                                        <span
                                                            class="text-xs font-bold text-gray-400 uppercase">‰øÆÊîπÊó•Êúü</span>
                                                        <span v-if="fileSortBy === 'modified'"
                                                            class="material-icons text-xs text-cyan-400">
                                                            {{ fileSortAsc ? 'arrow_drop_down' : 'arrow_drop_up' }}
                                                        </span>
                                                    </div>
                                                </th>
                                                <th class="p-3 text-left cursor-pointer hover:bg-white/5 transition-colors"
                                                    @click="sortFileList('size')">
                                                    <div class="flex items-center gap-2">
                                                        <span
                                                            class="text-xs font-bold text-gray-400 uppercase">Â§ßÂ∞è</span>
                                                        <span v-if="fileSortBy === 'size'"
                                                            class="material-icons text-xs text-cyan-400">
                                                            {{ fileSortAsc ? 'arrow_drop_down' : 'arrow_drop_up' }}
                                                        </span>
                                                    </div>
                                                </th>
                                                <th class="p-3 w-24 text-center">
                                                    <span class="text-xs font-bold text-gray-400 uppercase">Êìç‰Ωú</span>
                                                </th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr v-for="item in fileListItems" :key="item.name"
                                                :class="{ 'bg-cyan-900/20 border-l-2 border-cyan-500': selectedFiles.has(item.name) }"
                                                class="border-b border-white/5 hover:bg-white/5 transition-colors">

                                                <td class="p-3">
                                                    <input v-if="!item.is_dir" type="checkbox"
                                                        :checked="selectedFiles.has(item.name)"
                                                        @change="toggleFileSelection(item)"
                                                        class="rounded bg-[#131314] border-[#333] text-cyan-500 focus:ring-cyan-500">
                                                </td>

                                                <td class="p-3 cursor-pointer"
                                                    @click="item.is_dir ? browseIntoFolder(item) : openArchiveDrawer(item)">
                                                    <div class="flex items-center gap-3">
                                                        <span class="material-icons text-lg"
                                                            :class="item.is_dir ? 'text-yellow-500' : 'text-blue-400'">
                                                            {{ item.is_dir ? 'folder' : 'description' }}
                                                        </span>
                                                        <span class="text-white text-sm">{{ item.name }}</span>
                                                    </div>
                                                </td>

                                                <td class="p-3 text-gray-400 text-xs">
                                                    {{ item.modified ? new Date(item.modified * 1000).toLocaleString() :
                                                    '-' }}
                                                </td>

                                                <td class="p-3 text-gray-400 text-xs">
                                                    {{ item.size ? (item.size / 1024).toFixed(1) + ' KB' : '-' }}
                                                </td>

                                                <td class="p-3 text-center">
                                                    <!-- Button for Files -->
                                                    <button v-if="!item.is_dir" @click.stop="handleFileDelete(item)"
                                                        class="text-red-400 hover:text-red-300 p-1.5 hover:bg-red-900/20 rounded transition-colors"
                                                        title="Âà†Èô§Êñá‰ª∂">
                                                        <span class="material-icons text-sm">delete</span>
                                                    </button>
                                                    <!-- Button for Folders -->
                                                    <button v-else @click.stop="handleFolderDelete(item)"
                                                        class="text-red-400 hover:text-red-300 p-1.5 hover:bg-red-900/20 rounded transition-colors"
                                                        title="Âà†Èô§Êñá‰ª∂Â§π">
                                                        <span class="material-icons text-sm">folder_delete</span>
                                                    </button>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>

                                    <!-- Âä†ËΩΩÁä∂ÊÄÅ -->
                                    <div v-if="isFileListLoading" class="p-12 text-center">
                                        <span
                                            class="material-icons animate-spin text-3xl text-cyan-400 mb-2">refresh</span>
                                        <p class="text-gray-400">Âä†ËΩΩ‰∏≠...</p>
                                    </div>

                                    <!-- Á©∫Áä∂ÊÄÅ -->
                                    <div v-else-if="!fileListItems || fileListItems.length === 0"
                                        class="p-12 text-center">
                                        <span class="material-icons text-4xl text-gray-600 mb-2">folder_open</span>
                                        <p class="text-gray-500">Ê≠§ÁõÆÂΩï‰∏∫Á©∫</p>
                                    </div>
                                </div>

                                <!-- ÂàùÂßãÁä∂ÊÄÅÊèêÁ§∫ -->
                                <div v-if="!currentBrowseRoot && (!userStorageLocations || userStorageLocations.length === 0)"
                                    class="glass-panel rounded-xl p-12 text-center">
                                    <span class="material-icons text-5xl text-gray-600 mb-4">cloud_off</span>
                                    <p class="text-gray-400 mb-2">Êú™ÈÖçÁΩÆÂ≠òÂÇ®‰ΩçÁΩÆ</p>
                                    <p class="text-gray-500 text-sm">ËØ∑ÂÖàÂú®"Â≠òÂÇ®ÁÆ°ÁêÜ"‰∏≠Ê∑ªÂä†Â≠òÂÇ®Ê†π</p>
                                </div>
                            </div>

                            <!-- Ë∑ØÁî±Ê®°ÂûãÊ±† -->
                            <div v-show="configPanel === 'router'" class="space-y-6 animate-fade-in">
                                <div class="flex items-center justify-between mb-4">
                                    <div>
                                        <h2 class="text-xl font-bold text-white flex items-center gap-2 mb-1">
                                            <span class="material-icons text-purple-400">router</span>
                                            Ë∑ØÁî±Ê®°ÂûãÊ±†
                                        </h2>
                                        <p class="text-sm text-gray-400">ÈÖçÁΩÆÊÑèÂõæË∑ØÁî±Ê®°ÂûãÔºåË∂ä‰∏äË∂ä‰ºòÂÖàÔºàFailoverÈ°∫Â∫èÔºâ</p>
                                    </div>
                                    <button @click="fetchRouterModels"
                                        class="px-3 py-2 glass-input hover:bg-white/10 text-white rounded-lg text-sm flex items-center gap-2">
                                        <span class="material-icons text-sm">refresh</span> Âà∑Êñ∞
                                    </button>
                                </div>

                                <!-- Ê®°ÂûãÂç°ÁâáÂàóË°® -->
                                <div class="space-y-4">
                                    <div v-for="(model, index) in routerModels" :key="model.id"
                                        class="glass-panel rounded-xl border-transparent p-5 hover:border-purple-500/50 transition-all cursor-move backdrop-blur-sm"
                                        :draggable="true" @dragstart="onRouterDragStart(index)"
                                        @dragover.prevent="onDragOver(index)" @drop="onRouterDrop(index)">
                                        <div class="flex items-start gap-4">
                                            <span class="material-icons text-gray-500 text-2xl mt-1">drag_handle</span>
                                            <div class="flex-1">
                                                <div class="flex items-center justify-between mb-3">
                                                    <div class="flex items-center gap-3">
                                                        <span
                                                            class="px-2 py-1 bg-purple-500/20 text-purple-400 text-xs rounded">‰ºòÂÖàÁ∫ß
                                                            {{ index + 1 }}</span>
                                                        <h3 class="text-lg font-bold text-white">{{ model.model_id }}
                                                        </h3>
                                                    </div>
                                                    <div class="flex items-center gap-2">
                                                        <button @click.stop="testModelConnection(model)"
                                                            class="p-2 hover:bg-[#333] rounded-lg transition-colors group"
                                                            title="Test Connection">
                                                            <span class="material-icons text-lg"
                                                                :class="getTestIconClass(model)">wifi</span>
                                                        </button>
                                                        <button @click="editRouterModelCard(model)"
                                                            class="text-purple-400 hover:text-purple-300 p-2">
                                                            <span class="material-icons text-lg">{{
                                                                editingRouterModel?.id ===
                                                                model.id ? 'close' : 'edit' }}</span>
                                                        </button>
                                                        <button @click="deleteRouterModel(model.id)"
                                                            class="text-red-400 hover:text-red-300 p-2">
                                                            <span class="material-icons text-lg">delete</span>
                                                        </button>
                                                    </div>
                                                </div>

                                                <!-- ÁºñËæëÊ®°Âºè -->
                                                <div v-if="editingRouterModel?.id === model.id"
                                                    class="space-y-3 pt-3 border-t border-[#333]">
                                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                                                        <div>
                                                            <label class="block text-xs text-gray-400 mb-1">ÊòæÁ§∫ÂêçÁß∞</label>
                                                            <input v-model="editingRouterModel.name" type="text"
                                                                placeholder="e.g. Gemini ËÅîÁΩëÁâà"
                                                                class="w-full bg-[#131314] border border-[#333] rounded px-3 py-2 text-sm text-white focus:outline-none focus:border-purple-500">
                                                        </div>
                                                        <div>
                                                            <label class="block text-xs text-gray-400 mb-1">Model
                                                                ID</label>
                                                            <input v-model="editingRouterModel.model_id" type="text"
                                                                placeholder="e.g. gemini-2.5-flash"
                                                                class="w-full bg-[#131314] border border-[#333] rounded px-3 py-2 text-sm text-white focus:outline-none focus:border-purple-500">
                                                        </div>
                                                        <div>
                                                            <label
                                                                class="block text-xs text-gray-400 mb-1">Provider</label>
                                                            <select v-model="editingRouterModel.provider"
                                                                class="w-full bg-[#131314] border border-[#333] rounded px-3 py-2 text-sm text-white focus:outline-none focus:border-purple-500">
                                                                <option value="gemini">Gemini</option>
                                                                <option value="openai">OpenAI</option>
                                                                <option value="dashscope">Dashscope</option>
                                                            </select>
                                                        </div>
                                                        <div>
                                                            <label class="block text-xs text-gray-400 mb-1">Base
                                                                URL</label>
                                                            <input v-model="editingRouterModel.base_url" type="text"
                                                                placeholder="https://api.openai.com/v1"
                                                                class="w-full bg-[#131314] border border-[#333] rounded px-3 py-2 text-sm text-white focus:outline-none focus:border-purple-500">
                                                        </div>
                                                        <div>
                                                            <label class="block text-xs text-gray-400 mb-1">API
                                                                Key</label>
                                                            <input v-model="editingRouterModel.api_key" type="password"
                                                                placeholder="ÁïôÁ©∫‰ΩøÁî®ÂÖ®Â±ÄÈÖçÁΩÆ"
                                                                class="w-full bg-[#131314] border border-[#333] rounded px-3 py-2 text-sm text-white focus:outline-none focus:border-purple-500">
                                                        </div>
                                                        <div class="md:col-span-2">
                                                            <label class="block text-xs text-gray-400 mb-1">Preset
                                                                Config (JSON)</label>
                                                            <textarea v-model="editingRouterModel.config_text"
                                                                placeholder='{"thinking": {"type": "enabled"}, "temperature": 0.7}'
                                                                rows="4"
                                                                class="w-full font-mono text-xs bg-[#131314] border border-[#333] rounded px-3 py-2 text-white focus:outline-none focus:border-purple-500"></textarea>
                                                            <p class="text-xs text-gray-500 mt-1">Áî®‰∫éÂ≠òÂÇ®Ê®°ÂûãÁâπÂÆöÂèÇÊï∞ÔºåÂ¶Ç thinking
                                                                mode, temperature, max_tokens Á≠â</p>
                                                        </div>
                                                    </div>
                                                    <div class="flex items-center gap-2">
                                                        <button @click="saveRouterModelCard"
                                                            class="px-4 py-2 bg-purple-600 hover:bg-purple-500 text-white rounded text-sm">
                                                            ‰øùÂ≠ò
                                                        </button>
                                                        <button @click="cancelEditRouterModel"
                                                            class="px-4 py-2 bg-[#2A2B2E] hover:bg-[#333] text-gray-300 rounded text-sm">
                                                            ÂèñÊ∂à
                                                        </button>
                                                    </div>
                                                </div>

                                                <!-- Êü•ÁúãÊ®°Âºè -->
                                                <div v-else class="space-y-2">
                                                    <div class="grid grid-cols-2 gap-4 text-sm">
                                                        <div>
                                                            <span class="text-gray-500">Provider:</span>
                                                            <span class="text-white ml-2">{{ model.provider }}</span>
                                                        </div>
                                                        <div>
                                                            <span class="text-gray-500">Model ID:</span>
                                                            <span class="text-white ml-2">{{ model.model_id }}</span>
                                                        </div>
                                                        <div v-if="model.base_url" class="md:col-span-2">
                                                            <span class="text-gray-500">Base URL:</span>
                                                            <span class="text-white ml-2 text-xs">{{ model.base_url
                                                                }}</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Êñ∞Ê®°ÂûãÁºñËæëË°®Âçï -->
                                    <div v-if="editingRouterModel && !editingRouterModel.id"
                                        class="bg-[#1E1F20] rounded-xl border-2 border-purple-500 p-6 mb-4">
                                        <div class="flex items-center justify-between mb-4">
                                            <h3 class="text-lg font-bold text-white">Ê∑ªÂä†Êñ∞Ë∑ØÁî±Ê®°Âûã</h3>
                                            <button @click="cancelEditRouterModel"
                                                class="text-gray-400 hover:text-white">
                                                <span class="material-icons">close</span>
                                            </button>
                                        </div>
                                        <div class="space-y-3">
                                            <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                                                <div>
                                                    <label class="block text-xs text-gray-400 mb-1">ÊòæÁ§∫ÂêçÁß∞</label>
                                                    <input v-model="editingRouterModel.name" type="text"
                                                        placeholder="e.g. Qwen Router"
                                                        class="w-full bg-[#131314] border border-[#333] rounded px-3 py-2 text-sm text-white focus:outline-none focus:border-purple-500">
                                                </div>
                                                <div>
                                                    <label class="block text-xs text-gray-400 mb-1">Provider</label>
                                                    <select v-model="editingRouterModel.provider"
                                                        class="w-full bg-[#131314] border border-[#333] rounded px-3 py-2 text-sm text-white focus:outline-none focus:border-purple-500">
                                                        <option value="gemini">Gemini</option>
                                                        <option value="openai">OpenAI</option>
                                                        <option value="dashscope">Dashscope</option>
                                                    </select>
                                                </div>
                                                <div>
                                                    <label class="block text-xs text-gray-400 mb-1">Model ID</label>
                                                    <input v-model="editingRouterModel.model_id" type="text"
                                                        placeholder="e.g. gemini-2.5-flash"
                                                        class="w-full bg-[#131314] border border-[#333] rounded px-3 py-2 text-sm text-white focus:outline-none focus:border-purple-500">
                                                </div>
                                                <div>
                                                    <label class="block text-xs text-gray-400 mb-1">API Key</label>
                                                    <input v-model="editingRouterModel.api_key" type="password"
                                                        placeholder="ÁïôÁ©∫‰ΩøÁî®ÂÖ®Â±ÄÈÖçÁΩÆ"
                                                        class="w-full bg-[#131314] border border-[#333] rounded px-3 py-2 text-sm text-white focus:outline-none focus:border-purple-500">
                                                </div>
                                                <div v-if="editingRouterModel.provider === 'openai'"
                                                    class="md:col-span-2">
                                                    <label class="block text-xs text-gray-400 mb-1">Base URL</label>
                                                    <input v-model="editingRouterModel.base_url" type="text"
                                                        placeholder="https://api.openai.com/v1"
                                                        class="w-full bg-[#131314] border border-[#333] rounded px-3 py-2 text-sm text-white focus:outline-none focus:border-purple-500">
                                                </div>
                                                <div class="md:col-span-2">
                                                    <label class="block text-xs text-gray-400 mb-1">Preset Config
                                                        (JSON)</label>
                                                    <textarea v-model="editingRouterModel.config_text"
                                                        placeholder='{"thinking": {"type": "enabled"}, "temperature": 0.7}'
                                                        rows="4"
                                                        class="w-full font-mono text-xs bg-[#131314] border border-[#333] rounded px-3 py-2 text-white focus:outline-none focus:border-purple-500"></textarea>
                                                    <p class="text-xs text-gray-500 mt-1">Áî®‰∫éÂ≠òÂÇ®Ê®°ÂûãÁâπÂÆöÂèÇÊï∞ÔºåÂ¶Ç thinking mode,
                                                        temperature, max_tokens Á≠â</p>
                                                </div>
                                            </div>
                                            <div class="flex items-center gap-2">
                                                <button @click="saveRouterModelCard"
                                                    class="px-4 py-2 bg-purple-600 hover:bg-purple-500 text-white rounded text-sm">
                                                    ‰øùÂ≠ò
                                                </button>
                                                <button @click="cancelEditRouterModel"
                                                    class="px-4 py-2 bg-[#2A2B2E] hover:bg-[#333] text-gray-300 rounded text-sm">
                                                    ÂèñÊ∂à
                                                </button>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Ê∑ªÂä†Êñ∞Ê®°ÂûãÂç°Áâá -->
                                    <div v-if="!editingRouterModel || editingRouterModel.id"
                                        @click="addNewRouterModelCard"
                                        class="bg-[#1E1F20] rounded-xl border-2 border-dashed border-[#333] p-8 text-center cursor-pointer hover:border-purple-500 transition-colors">
                                        <span class="material-icons text-4xl text-gray-500 mb-2">add_circle</span>
                                        <p class="text-gray-400 text-sm">ÁÇπÂáªÊ∑ªÂä†Êñ∞ÁöÑË∑ØÁî±Ê®°Âûã</p>
                                    </div>

                                    <div v-if="routerModels.length === 0 && (!editingRouterModel || editingRouterModel.id)"
                                        class="text-center text-gray-500 py-12 text-sm">
                                        ÊöÇÊó†Ë∑ØÁî±Ê®°ÂûãÔºåÁÇπÂáª‰∏äÊñπÂç°ÁâáÊ∑ªÂä†
                                    </div>
                                </div>
                            </div>

                            <!-- Êé®ÁêÜÊ®°ÂûãÊ±† -->
                            <div v-show="configPanel === 'reasoning'" class="space-y-6 animate-fade-in">
                                <div class="flex items-center justify-between mb-4">
                                    <div>
                                        <h2 class="text-xl font-bold text-white flex items-center gap-2 mb-1">
                                            <span class="material-icons text-blue-400">psychology</span>
                                            Êé®ÁêÜÊ®°ÂûãÊ±†
                                        </h2>
                                        <p class="text-sm text-gray-400">ÈÖçÁΩÆÊé®ÁêÜÊ®°ÂûãÔºåÈ°∫Â∫èÂç≥‰∏∫ÂâçÂè∞ÊòæÁ§∫È°∫Â∫è</p>
                                    </div>
                                    <button @click="fetchReasoningModels"
                                        class="px-3 py-2 glass-input hover:bg-white/10 text-white rounded-lg text-sm flex items-center gap-2">
                                        <span class="material-icons text-sm">refresh</span> Âà∑Êñ∞
                                    </button>
                                </div>

                                <!-- Ê®°ÂûãÂç°ÁâáÂàóË°® -->
                                <div class="space-y-4">
                                    <div v-for="(model, index) in reasoningModels" :key="model.id"
                                        class="glass-panel rounded-xl border-transparent p-5 hover:border-blue-500/50 transition-all cursor-move backdrop-blur-sm"
                                        :draggable="true" @dragstart="onDragStart(index)"
                                        @dragover.prevent="onDragOver(index)" @drop="onDrop(index)">
                                        <div class="flex items-start gap-4">
                                            <span class="material-icons text-gray-500 text-2xl mt-1">drag_handle</span>
                                            <div class="flex-1">
                                                <div class="flex items-center justify-between mb-3">
                                                    <div class="flex items-center gap-3">
                                                        <span
                                                            class="px-2 py-1 bg-blue-500/20 text-blue-400 text-xs rounded">Â∫èÂè∑
                                                            {{ index + 1 }}</span>
                                                        <h3 class="text-lg font-bold text-white">{{ model.model_id }}
                                                        </h3>
                                                    </div>
                                                    <div class="flex items-center gap-2">
                                                        <button @click.stop="testModelConnection(model)"
                                                            class="p-2 hover:bg-[#333] rounded-lg transition-colors group"
                                                            title="Test Connection">
                                                            <span class="material-icons text-lg"
                                                                :class="getTestIconClass(model)">wifi</span>
                                                        </button>
                                                        <button @click="editReasoningModelCard(model)"
                                                            class="text-blue-400 hover:text-blue-300 p-2">
                                                            <span class="material-icons text-lg">{{
                                                                editingReasoningModel?.id
                                                                === model.id ? 'close' : 'edit' }}</span>
                                                        </button>
                                                        <button @click="deleteReasoningModel(model.id)"
                                                            class="text-red-400 hover:text-red-300 p-2">
                                                            <span class="material-icons text-lg">delete</span>
                                                        </button>
                                                    </div>
                                                </div>

                                                <!-- ÁºñËæëÊ®°Âºè -->
                                                <div v-if="editingReasoningModel?.id === model.id"
                                                    class="space-y-3 pt-3 border-t border-[#333]">
                                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                                                        <div>
                                                            <label class="block text-xs text-gray-400 mb-1">ÊòæÁ§∫ÂêçÁß∞</label>
                                                            <input v-model="editingReasoningModel.name" type="text"
                                                                placeholder="e.g. Qwen Max ÊÄùËÄÉÁâà"
                                                                class="w-full bg-[#131314] border border-[#333] rounded px-3 py-2 text-sm text-white focus:outline-none focus:border-blue-500">
                                                        </div>
                                                        <div>
                                                            <label class="block text-xs text-gray-400 mb-1">Model
                                                                ID</label>
                                                            <input v-model="editingReasoningModel.model_id" type="text"
                                                                placeholder="e.g. gemini-1.5-pro"
                                                                class="w-full bg-[#131314] border border-[#333] rounded px-3 py-2 text-sm text-white focus:outline-none focus:border-blue-500">
                                                        </div>
                                                        <div>
                                                            <label
                                                                class="block text-xs text-gray-400 mb-1">Provider</label>
                                                            <select v-model="editingReasoningModel.provider"
                                                                class="w-full bg-[#131314] border border-[#333] rounded px-3 py-2 text-sm text-white focus:outline-none focus:border-blue-500">
                                                                <option value="gemini">Gemini</option>
                                                                <option value="openai">OpenAI</option>
                                                                <option value="dashscope">Dashscope</option>
                                                            </select>
                                                        </div>
                                                        <div>
                                                            <label class="block text-xs text-gray-400 mb-1">Base
                                                                URL</label>
                                                            <input v-model="editingReasoningModel.base_url" type="text"
                                                                placeholder="https://api.openai.com/v1"
                                                                class="w-full bg-[#131314] border border-[#333] rounded px-3 py-2 text-sm text-white focus:outline-none focus:border-blue-500">
                                                        </div>
                                                        <div>
                                                            <label class="block text-xs text-gray-400 mb-1">API
                                                                Key</label>
                                                            <input v-model="editingReasoningModel.api_key"
                                                                type="password" placeholder="ÁïôÁ©∫‰ΩøÁî®ÂÖ®Â±ÄÈÖçÁΩÆ"
                                                                class="w-full bg-[#131314] border border-[#333] rounded px-3 py-2 text-sm text-white focus:outline-none focus:border-blue-500">
                                                        </div>
                                                        <div class="md:col-span-2">
                                                            <label class="block text-xs text-gray-400 mb-1">Preset
                                                                Config (JSON)</label>
                                                            <textarea v-model="editingReasoningModel.config_text"
                                                                placeholder='{"thinking": {"type": "enabled"}, "temperature": 0.7}'
                                                                rows="4"
                                                                class="w-full font-mono text-xs bg-[#131314] border border-[#333] rounded px-3 py-2 text-white focus:outline-none focus:border-blue-500"></textarea>
                                                            <p class="text-xs text-gray-500 mt-1">Áî®‰∫éÂ≠òÂÇ®Ê®°ÂûãÁâπÂÆöÂèÇÊï∞ÔºåÂ¶Ç thinking
                                                                mode, temperature, max_tokens Á≠â</p>
                                                        </div>
                                                    </div>
                                                    <div class="flex items-center gap-2">
                                                        <button @click="saveReasoningModelCard"
                                                            class="px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white rounded text-sm">
                                                            ‰øùÂ≠ò
                                                        </button>
                                                        <button @click="cancelEditReasoningModel"
                                                            class="px-4 py-2 bg-[#2A2B2E] hover:bg-[#333] text-gray-300 rounded text-sm">
                                                            ÂèñÊ∂à
                                                        </button>
                                                    </div>
                                                </div>

                                                <!-- Êü•ÁúãÊ®°Âºè -->
                                                <div v-else class="space-y-2">
                                                    <div class="grid grid-cols-2 gap-4 text-sm">
                                                        <div>
                                                            <span class="text-gray-500">Provider:</span>
                                                            <span class="text-white ml-2">{{ model.provider }}</span>
                                                        </div>
                                                        <div>
                                                            <span class="text-gray-500">Model ID:</span>
                                                            <span class="text-white ml-2">{{ model.model_id }}</span>
                                                        </div>
                                                        <div v-if="model.base_url" class="md:col-span-2">
                                                            <span class="text-gray-500">Base URL:</span>
                                                            <span class="text-white ml-2 text-xs">{{ model.base_url
                                                                }}</span>
                                                        </div>

                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Êñ∞Ê®°ÂûãÁºñËæëË°®Âçï -->
                                    <div v-if="editingReasoningModel && !editingReasoningModel.id"
                                        class="bg-[#1E1F20] rounded-xl border-2 border-blue-500 p-6 mb-4">
                                        <div class="flex items-center justify-between mb-4">
                                            <h3 class="text-lg font-bold text-white">Ê∑ªÂä†Êñ∞Êé®ÁêÜÊ®°Âûã</h3>
                                            <button @click="cancelEditReasoningModel"
                                                class="text-gray-400 hover:text-white">
                                                <span class="material-icons">close</span>
                                            </button>
                                        </div>
                                        <div class="space-y-3">
                                            <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                                                <div>
                                                    <label class="block text-xs text-gray-400 mb-1">ÊòæÁ§∫ÂêçÁß∞</label>
                                                    <input v-model="editingReasoningModel.name" type="text"
                                                        placeholder="e.g. Qwen Max ÊÄùËÄÉÁâà"
                                                        class="w-full bg-[#131314] border border-[#333] rounded px-3 py-2 text-sm text-white focus:outline-none focus:border-blue-500">
                                                </div>
                                                <div>
                                                    <label class="block text-xs text-gray-400 mb-1">Model ID</label>
                                                    <input v-model="editingReasoningModel.model_id" type="text"
                                                        placeholder="e.g. qwen-max"
                                                        class="w-full bg-[#131314] border border-[#333] rounded px-3 py-2 text-sm text-white focus:outline-none focus:border-blue-500">
                                                </div>
                                                <div>
                                                    <label class="block text-xs text-gray-400 mb-1">Provider</label>
                                                    <select v-model="editingReasoningModel.provider"
                                                        class="w-full bg-[#131314] border border-[#333] rounded px-3 py-2 text-sm text-white focus:outline-none focus:border-blue-500">
                                                        <option value="gemini">Gemini</option>
                                                        <option value="openai">OpenAI</option>
                                                        <option value="dashscope">Dashscope</option>
                                                    </select>
                                                </div>
                                                <div>
                                                    <label class="block text-xs text-gray-400 mb-1">Base URL</label>
                                                    <input v-model="editingReasoningModel.base_url" type="text"
                                                        placeholder="https://api.openai.com/v1"
                                                        class="w-full bg-[#131314] border border-[#333] rounded px-3 py-2 text-sm text-white focus:outline-none focus:border-blue-500">
                                                </div>
                                                <div>
                                                    <label class="block text-xs text-gray-400 mb-1">API Key</label>
                                                    <input v-model="editingReasoningModel.api_key" type="password"
                                                        placeholder="ÁïôÁ©∫‰ΩøÁî®ÂÖ®Â±ÄÈÖçÁΩÆ"
                                                        class="w-full bg-[#131314] border border-[#333] rounded px-3 py-2 text-sm text-white focus:outline-none focus:border-blue-500">
                                                </div>
                                                <div class="md:col-span-2">
                                                    <label class="block text-xs text-gray-400 mb-1">Preset Config
                                                        (JSON)</label>
                                                    <textarea v-model="editingReasoningModel.config_text"
                                                        placeholder='{"thinking": {"type": "enabled"}, "temperature": 0.7}'
                                                        rows="4"
                                                        class="w-full font-mono text-xs bg-[#131314] border border-[#333] rounded px-3 py-2 text-white focus:outline-none focus:border-blue-500"></textarea>
                                                    <p class="text-xs text-gray-500 mt-1">Áî®‰∫éÂ≠òÂÇ®Ê®°ÂûãÁâπÂÆöÂèÇÊï∞ÔºåÂ¶Ç thinking mode,
                                                        temperature, max_tokens Á≠â</p>
                                                </div>
                                            </div>
                                            <div class="flex items-center gap-2">
                                                <button @click="saveReasoningModelCard"
                                                    class="px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white rounded text-sm">
                                                    ‰øùÂ≠ò
                                                </button>
                                                <button @click="cancelEditReasoningModel"
                                                    class="px-4 py-2 bg-[#2A2B2E] hover:bg-[#333] text-gray-300 rounded text-sm">
                                                    ÂèñÊ∂à
                                                </button>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Ê∑ªÂä†Êñ∞Ê®°ÂûãÂç°Áâá -->
                                    <div v-if="!editingReasoningModel || editingReasoningModel.id"
                                        @click="addNewReasoningModelCard"
                                        class="bg-[#1E1F20] rounded-xl border-2 border-dashed border-[#333] p-8 text-center cursor-pointer hover:border-blue-500 transition-colors">
                                        <span class="material-icons text-4xl text-gray-500 mb-2">add_circle</span>
                                        <p class="text-gray-400 text-sm">ÁÇπÂáªÊ∑ªÂä†Êñ∞ÁöÑÊé®ÁêÜÊ®°Âûã</p>
                                    </div>

                                    <div v-if="reasoningModels.length === 0 && (!editingReasoningModel || editingReasoningModel.id)"
                                        class="text-center text-gray-500 py-12 text-sm">
                                        ```
                                        ÊöÇÊó†Êé®ÁêÜÊ®°ÂûãÔºåÁÇπÂáª‰∏äÊñπÂç°ÁâáÊ∑ªÂä†
                                    </div>
                                </div>
                            </div>


                            <!-- [Generic Schema-Driven Panel (Sidebar Items)] -->
                            <div v-for="group in sidebarConfigGroups" :key="group.id" v-show="configPanel === group.id"
                                class="space-y-6 animate-fade-in">
                                <div class="flex items-center justify-between mb-4">
                                    <div>
                                        <h2 class="text-xl font-bold text-white flex items-center gap-2 mb-1">
                                            <span class="material-icons text-blue-400">{{ group.icon || 'settings'
                                                }}</span>
                                            {{ group.title }}
                                        </h2>
                                        <p class="text-sm text-gray-400">{{ group.description }}</p>
                                    </div>
                                    <button @click="fetchConfigValues"
                                        class="px-3 py-2 glass-input hover:bg-white/10 text-white rounded-lg text-sm flex items-center gap-2">
                                        <span class="material-icons text-sm">refresh</span> Âà∑Êñ∞
                                    </button>
                                </div>

                                <div class="glass-panel rounded-xl border-transparent p-6 space-y-6 backdrop-blur-sm">
                                    <div v-for="field in group.fields" :key="field.key" class="space-y-2">
                                        <div class="flex justify-between items-start">
                                            <div class="space-y-1" :title="field.description">
                                                <label :for="field.key"
                                                    class="block text-sm font-medium text-gray-300 cursor-help flex items-center gap-1">
                                                    {{ field.label }}
                                                    <span v-if="field.required" class="text-red-400">*</span>
                                                    <span v-if="field.description"
                                                        class="material-icons text-[14px] text-gray-500">help_outline</span>
                                                </label>
                                                <p v-if="field.description" class="text-xs text-gray-500 max-w-lg">{{
                                                    field.description }}</p>
                                            </div>

                                            <!-- Field Type: Boolean (Toggle) -->
                                            <div v-if="field.type === 'boolean'" class="flex items-center h-6">
                                                <button
                                                    @click="updateConfigValue(field.key, !getConfigValue(field.key))"
                                                    :class="['relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none',
                                                    getConfigValue(field.key) ? 'bg-blue-600' : 'bg-gray-700']">
                                                    <span
                                                        :class="['inline-block h-4 w-4 transform rounded-full bg-white transition-transform',
                                                        getConfigValue(field.key) ? 'translate-x-6' : 'translate-x-1']" />
                                                </button>
                                            </div>
                                        </div>

                                        <!-- Field Type: String / Password / Number / Path -->
                                        <div v-if="['string', 'password', 'number', 'path'].includes(field.type)"
                                            class="mt-1">
                                            <div class="relative rounded-md shadow-sm">
                                                <input
                                                    :type="field.type === 'password' ? (showPasswords[field.key] ? 'text' : 'password') : (field.type === 'number' ? 'number' : 'text')"
                                                    :value="getConfigValue(field.key)"
                                                    @input="updateConfigValue(field.key, $event.target.value)"
                                                    class="block w-full rounded-md bg-[#131314] border border-[#333] px-3 py-2 text-white placeholder-gray-500 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 sm:text-sm"
                                                    :placeholder="field.type === 'path' ? '/path/to/dir' : ''">

                                                <!-- Password Toggle -->
                                                <div v-if="field.type === 'password'"
                                                    class="absolute inset-y-0 right-0 flex items-center pr-3">
                                                    <button @click="togglePasswordVisibility(field.key)"
                                                        class="text-gray-400 hover:text-gray-300 focus:outline-none">
                                                        <span class="material-icons text-sm">{{ showPasswords[field.key]
                                                            ? 'visibility_off' : 'visibility' }}</span>
                                                    </button>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- Field Type: Select -->
                                        <div v-if="field.type === 'select'" class="mt-1">
                                            <select :value="getConfigValue(field.key)"
                                                @change="updateConfigValue(field.key, $event.target.value)"
                                                class="block w-full rounded-md bg-[#131314] border border-[#333] px-3 py-2 text-white focus:border-blue-500 focus:ring-1 focus:ring-blue-500 sm:text-sm">
                                                <option v-for="opt in field.options" :key="opt.value"
                                                    :value="opt.value">
                                                    {{ opt.label }}
                                                </option>
                                            </select>
                                        </div>

                                        <!-- Special Helper: Test Webhook Button -->
                                        <div v-if="field.key === 'notifications.webhook_url'" class="mt-2 text-right">
                                            <button @click="testWebhook(getConfigValue(field.key))"
                                                class="text-xs px-2 py-1 bg-[#2A2B2E] hover:bg-[#333] text-blue-400 rounded border border-[#333] transition-colors">
                                                Test Webhook
                                            </button>
                                        </div>

                                    </div>

                                    <!-- Empty State if no fields -->
                                    <div v-if="!group.fields || group.fields.length === 0"
                                        class="text-center text-gray-500 py-4">
                                        No settings in this group.
                                    </div>
                                </div>
                                <div class="flex justify-end pt-4" v-if="group.fields && group.fields.length > 0">
                                    <button @click="saveAllConfig" :disabled="isConfigLoading"
                                        class="px-6 py-2 bg-blue-600 hover:bg-blue-500 text-white rounded-lg text-sm flex items-center gap-2 disabled:opacity-50 shadow-lg shadow-blue-600/20">
                                        <span class="material-icons text-sm">save</span> ‰øùÂ≠òÈÖçÁΩÆ
                                    </button>
                                </div>
                            </div>

                            <!-- Â≠òÂÇ®ÁÆ°ÁêÜ -->
                            <div v-show="configPanel === 'storage'" class="space-y-6 animate-fade-in">
                                <div class="flex items-center justify-between mb-4">
                                    <div>
                                        <h2 class="text-xl font-bold text-white flex items-center gap-2 mb-1">
                                            <span class="material-icons text-orange-400">inventory_2</span>
                                            Â≠òÂÇ®ÁÆ°ÁêÜ (Storage Roots)
                                        </h2>
                                        <p class="text-sm text-gray-400">ÁÆ°ÁêÜÂ§ö‰∏™Á°¨ÁõòÊåÇËΩΩÁÇπÔºåÊîØÊåÅNASÂ§öÁõò‰ΩçÊâ©Â±ï„ÄÇ</p>
                                    </div>
                                    <div class="flex gap-2">
                                        <button @click="openAddStorageModal"
                                            class="px-3 py-2 bg-orange-600/80 hover:bg-orange-500/80 text-white rounded-lg text-sm flex items-center gap-2 backdrop-blur-sm transition-all border border-orange-500/30">
                                            <span class="material-icons text-sm">add</span> Ê∑ªÂä†Â≠òÂÇ®Â∫ì
                                        </button>
                                        <button @click="fetchStorageRoots"
                                            class="px-3 py-2 glass-input hover:bg-white/10 text-white rounded-lg text-sm flex items-center gap-2">
                                            <span class="material-icons text-sm">refresh</span> Âà∑Êñ∞
                                        </button>
                                    </div>
                                </div>

                                <!-- Â≠òÂÇ®Â∫ìÂàóË°® -->
                                <div class="space-y-4">
                                    <div v-if="!storageRoots || storageRoots.length === 0"
                                        class="text-center py-12 text-gray-500">
                                        <span class="material-icons text-4xl mb-2">folder_off</span>
                                        <p>ÊöÇÊó†Â≠òÂÇ®Â∫ìÔºåÁÇπÂáª‰∏äÊñπ"Ê∑ªÂä†Â≠òÂÇ®Â∫ì"ÂºÄÂßãÈÖçÁΩÆ</p>
                                    </div>

                                    <div v-for="root in storageRoots" :key="root.id"
                                        class="glass-panel rounded-xl p-5 hover:border-orange-500/50 transition-all backdrop-blur-sm"
                                        :class="root.is_default ? 'border-orange-500/50' : 'border-transparent'">
                                        <div class="flex items-start justify-between">
                                            <div class="flex-1">
                                                <div class="flex items-center gap-3 mb-2">
                                                    <span class="material-icons text-2xl"
                                                        :class="root.is_default ? 'text-orange-400' : 'text-gray-500'">
                                                        {{ root.is_default ? 'star' : 'folder' }}
                                                    </span>
                                                    <h3 class="text-lg font-bold text-white">{{ root.name }}</h3>
                                                    <span v-if="root.is_default"
                                                        class="px-2 py-0.5 bg-orange-500/20 text-orange-400 text-xs rounded">
                                                        ÈªòËÆ§
                                                    </span>
                                                    <span v-if="!root.is_active"
                                                        class="px-2 py-0.5 bg-red-500/20 text-red-400 text-xs rounded">
                                                        Â∑≤Á¶ÅÁî®
                                                    </span>
                                                </div>
                                                <p class="text-sm text-gray-400 font-mono">{{ root.mount_path }}</p>
                                                <p class="text-xs text-gray-600 mt-1">ÂàõÂª∫‰∫é: {{ root.created_at }}</p>
                                            </div>
                                            <div class="flex items-center gap-2">
                                                <button v-if="!root.is_default" @click="setDefaultStorageRoot(root.id)"
                                                    class="p-2 text-gray-400 hover:text-orange-400 hover:bg-[#333] rounded-lg transition-colors"
                                                    title="ËÆæ‰∏∫ÈªòËÆ§">
                                                    <span class="material-icons">star_outline</span>
                                                </button>
                                                <button v-if="!root.is_default" @click="deleteStorageRoot(root.id)"
                                                    class="p-2 text-gray-400 hover:text-red-400 hover:bg-[#333] rounded-lg transition-colors"
                                                    title="Âà†Èô§">
                                                    <span class="material-icons">delete</span>
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- ‰ΩøÁî®ËØ¥Êòé -->
                                <div class="glass-panel rounded-xl p-4 border-transparent">
                                    <h4 class="text-sm font-bold text-gray-300 mb-2 flex items-center gap-2">
                                        <span class="material-icons text-sm text-blue-400">info</span>
                                        ‰ΩøÁî®ËØ¥Êòé
                                    </h4>
                                    <ul class="text-xs text-gray-500 space-y-1 list-disc list-inside">
                                        <li>Êñ∞Êñá‰ª∂‰ºöÂ≠òÂÇ®Âà∞<strong class="text-gray-400">ÈªòËÆ§Â≠òÂÇ®Â∫ì</strong></li>
                                        <li>ÊâπÈáèÂØºÂÖ•Êó∂ÔºåÁ≥ªÁªü‰ºöËá™Âä®Ê£ÄÊµãÊñá‰ª∂ÊâÄÂ±ûÁöÑÂ≠òÂÇ®Ê†π</li>
                                        <li>Á°Æ‰øùÂú® Docker ‰∏≠ÊåÇËΩΩÂ•ΩÁõÆÂΩïÂêéÂÜçÊ∑ªÂä†Â≠òÂÇ®Â∫ì</li>
                                    </ul>
                                </div>
                            </div>

                            <!-- [REMOVED] Duplicate archives panel - consolidated into first archives panel above -->
                            <!-- ÊèêÁ§∫ËØçÂÆûÈ™åÂÆ§ -->
                            <div v-show="configPanel === 'prompts'" class="space-y-6 animate-fade-in">
                                <div class="flex items-center justify-between mb-4">
                                    <div>
                                        <h2 class="text-xl font-bold text-white flex items-center gap-2 mb-1">
                                            <span class="material-icons text-pink-400">science</span>
                                            ÊèêÁ§∫ËØçÂÆûÈ™åÂÆ§ (Prompt Laboratory)
                                        </h2>
                                        <p class="text-sm text-gray-400">ÁÆ°ÁêÜÂíåË∞É‰ºòÁ≥ªÁªüÊèêÁ§∫ËØçÔºåÊîØÊåÅÁÉ≠Êõ¥Êñ∞„ÄÇ</p>
                                    </div>
                                    <div class="flex gap-2">
                                        <button @click="createPrompt"
                                            class="px-3 py-2 bg-pink-600/80 hover:bg-pink-500/80 text-white rounded-lg text-sm flex items-center gap-2 backdrop-blur-sm transition-all border border-pink-500/30">
                                            <span class="material-icons text-sm">add</span> Êñ∞Âª∫
                                        </button>
                                        <button @click="refreshPromptCache"
                                            class="px-3 py-2 glass-input hover:bg-white/10 text-white rounded-lg text-sm flex items-center gap-2">
                                            <span class="material-icons text-sm">sync</span> Âà∑Êñ∞ÁºìÂ≠ò
                                        </button>
                                        <button @click="fetchPrompts"
                                            class="px-3 py-2 glass-input hover:bg-white/10 text-white rounded-lg text-sm flex items-center gap-2">
                                            <span class="material-icons text-sm">refresh</span> ÂàóË°®
                                        </button>
                                    </div>
                                </div>

                                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 h-[calc(100vh-250px)]">
                                    <!-- Â∑¶‰æßÂàóË°® -->
                                    <div
                                        class="md:col-span-1 border-r border-white/5 pr-4 flex flex-col h-full overflow-hidden">
                                        <div class="flex-1 overflow-y-auto space-y-4 pr-2 scrollbar-thin">
                                            <div v-if="isPromptLoading" class="space-y-6 animate-pulse px-1 pt-2">
                                                <!-- Skeleton Group -->
                                                <div class="space-y-3">
                                                    <div class="h-3 bg-white/10 rounded w-16 mb-2"></div>
                                                    <div class="h-24 bg-white/5 rounded-xl border border-white/5 p-3">
                                                        <div class="h-4 bg-white/10 rounded w-3/4 mb-3"></div>
                                                        <div class="h-3 bg-white/5 rounded w-1/2"></div>
                                                    </div>
                                                    <div class="h-24 bg-white/5 rounded-xl border border-white/5 p-3">
                                                        <div class="h-4 bg-white/10 rounded w-2/3 mb-3"></div>
                                                        <div class="h-3 bg-white/5 rounded w-1/3"></div>
                                                    </div>
                                                </div>
                                                <!-- Skeleton Group 2 -->
                                                <div class="space-y-3">
                                                    <div class="h-3 bg-white/10 rounded w-20 mb-2"></div>
                                                    <div class="h-24 bg-white/5 rounded-xl border border-white/5 p-3">
                                                        <div class="h-4 bg-white/10 rounded w-1/2 mb-3"></div>
                                                        <div class="h-3 bg-white/5 rounded w-3/4"></div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div v-else-if="prompts.length === 0"
                                                class="text-center text-gray-500 py-4">
                                                ÊöÇÊó†ÊèêÁ§∫ËØç</div>

                                            <div v-for="(groupPrompts, groupName) in groupedPrompts" :key="groupName"
                                                class="mb-4">
                                                <div class="text-xs font-bold text-gray-500 uppercase mb-2 px-2">{{
                                                    groupName || 'General' }}</div>
                                                <div class="space-y-2">
                                                    <div v-for="prompt in groupPrompts" :key="prompt.key"
                                                        @click="editPrompt(prompt)"
                                                        :class="['p-3 rounded-lg border cursor-pointer transition-all hover:border-pink-500/50 backdrop-blur-sm', 
                                                        editingPrompt && editingPrompt.key === prompt.key ? 'bg-pink-500/10 border-pink-500/50' : 'glass-panel border-transparent']">
                                                        <div class="font-bold text-white text-sm break-all">{{
                                                            prompt.key }}</div>
                                                        <div v-if="prompt.role" class="text-xs text-pink-400 mt-0.5">{{
                                                            prompt.role }}</div>
                                                        <div class="text-xs text-gray-500 mt-1 truncate">{{
                                                            prompt.description || 'Êó†ÊèèËø∞' }}</div>
                                                        <div class="flex justify-between items-center mt-2">
                                                            <span
                                                                class="text-[10px] bg-[#333] text-gray-400 px-1.5 py-0.5 rounded">v{{
                                                                prompt.version }}</span>
                                                            <span class="text-[10px] text-gray-600">{{ new
                                                                Date(prompt.updated_at).toLocaleDateString() }}</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Âè≥‰æßÁºñËæëÂå∫ -->
                                    <div
                                        class="md:col-span-2 flex flex-col h-full overflow-hidden glass-panel rounded-xl p-4">
                                        <template v-if="editingPrompt">
                                            <div class="flex items-center gap-3 mb-4">
                                                <div class="flex-1">
                                                    <label class="block text-xs text-gray-400 mb-1">Key (Unique)</label>
                                                    <input v-model="editingPrompt.key" type="text"
                                                        placeholder="e.g. system.morning_briefing"
                                                        :disabled="prompts.some(p => p.key === editingPrompt.key && p.version > 0 && editingPrompt.key !== '')"
                                                        class="w-full bg-[#131314] border border-[#333] rounded px-3 py-2 text-sm text-white focus:outline-none focus:border-pink-500 font-mono">
                                                </div>
                                                <div class="w-1/3">
                                                    <label class="block text-xs text-gray-400 mb-1">Group</label>
                                                    <input v-model="editingPrompt.group" type="text"
                                                        placeholder="general"
                                                        class="w-full bg-[#131314] border border-[#333] rounded px-3 py-2 text-sm text-white focus:outline-none focus:border-pink-500">
                                                </div>
                                                <div class="w-1/4">
                                                    <label class="block text-xs text-gray-400 mb-1">Role (UI
                                                        Title)</label>
                                                    <input v-model="editingPrompt.role" type="text"
                                                        placeholder="e.g. AI Assistant"
                                                        class="w-full bg-[#131314] border border-[#333] rounded px-3 py-2 text-sm text-white focus:outline-none focus:border-pink-500">
                                                </div>
                                            </div>
                                            <div class="mb-4">
                                                <label class="block text-xs text-gray-400 mb-1">Description</label>
                                                <input v-model="editingPrompt.description" type="text"
                                                    placeholder="Áî®ÈÄîËØ¥Êòé"
                                                    class="w-full bg-[#131314] border border-[#333] rounded px-3 py-2 text-sm text-white focus:outline-none focus:border-pink-500">
                                            </div>
                                            <div class="flex-1 flex flex-col min-h-0 mb-4">
                                                <label class="block text-xs text-gray-400 mb-1">Prompt Content (ÊîØÊåÅ
                                                    Jinja2 Ê®°Êùø)</label>
                                                <textarea v-model="editingPrompt.content"
                                                    class="flex-1 w-full bg-[#131314] border border-[#333] rounded p-4 text-sm text-gray-200 font-mono focus:outline-none focus:border-pink-500 resize-none leading-relaxed overflow-y-auto"></textarea>
                                            </div>
                                            <div class="flex justify-end gap-3 pt-3 border-t border-white/5">
                                                <button @click="cancelEditPrompt"
                                                    class="px-4 py-2 hover:bg-white/5 text-gray-400 rounded-lg text-sm">
                                                    ÂèñÊ∂àÂπ∂ÂÖ≥Èó≠
                                                </button>
                                                <button @click="savePrompt"
                                                    class="px-6 py-2 bg-pink-600 hover:bg-pink-500 text-white rounded-lg text-sm font-medium shadow-lg shadow-pink-500/20">
                                                    <span class="material-icons text-sm align-middle mr-1">save</span>
                                                    ‰øùÂ≠òÊõ¥Êîπ
                                                </button>
                                            </div>
                                        </template>
                                        <div v-else
                                            class="h-full flex flex-col items-center justify-center text-gray-500">
                                            <span class="material-icons text-6xl opacity-20 mb-4">science</span>
                                            <p>ËØ∑‰ªéÂ∑¶‰æßÈÄâÊã©‰∏Ä‰∏™ÊèêÁ§∫ËØçËøõË°åÁºñËæëÔºåÊàñÁÇπÂáªÊñ∞Âª∫„ÄÇ</p>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- System Controls Panel (Aggregated) -->
                            <div v-show="configPanel === 'system-controls'" class="space-y-8 animate-fade-in">
                                <div class="flex items-center justify-between mb-4">
                                    <div>
                                        <h2 class="text-xl font-bold text-white flex items-center gap-2 mb-1">
                                            <span class="material-icons text-green-400">tune</span>
                                            Á≥ªÁªüÊéßÂà∂ (System Controls)
                                        </h2>
                                        <p class="text-sm text-gray-400">ÈõÜ‰∏≠ÁÆ°ÁêÜÁ≥ªÁªüÁ≠ñÁï•„ÄÅÂêéÂè∞‰ªªÂä°‰∏éÊàêÊú¨ÊéßÂà∂„ÄÇ</p>
                                    </div>
                                    <div class="flex gap-2">
                                        <button @click="saveAllConfig" :disabled="isConfigLoading"
                                            class="px-4 py-2 bg-green-600 hover:bg-green-500 text-white rounded-lg text-sm flex items-center gap-2 disabled:opacity-50 shadow-lg shadow-green-600/20 transition-all">
                                            <span class="material-icons text-sm">save</span> ÂÖ®Â±Ä‰øùÂ≠ò
                                        </button>
                                        <button @click="fetchConfigValues"
                                            class="px-3 py-2 glass-input hover:bg-white/10 text-white rounded-lg text-sm flex items-center gap-2">
                                            <span class="material-icons text-sm">refresh</span> Âà∑Êñ∞
                                        </button>
                                    </div>
                                </div>

                                <!-- Loop through System Groups and render as cards -->
                                <div v-for="group in systemControlGroups" :key="group.id"
                                    class="glass-panel rounded-xl border-transparent overflow-hidden backdrop-blur-sm">
                                    <div class="p-4 border-b border-[#333] bg-[#2A2B2E]/50 flex items-center gap-3">
                                        <span class="material-icons text-gray-400">{{ group.icon || 'settings' }}</span>
                                        <h3 class="font-bold text-white">{{ group.title }}</h3>
                                    </div>

                                    <div class="p-6 space-y-6">
                                        <div v-for="field in group.fields" :key="field.key" class="space-y-2">
                                            <div class="flex justify-between items-start">
                                                <div class="space-y-1" :title="field.description">
                                                    <label :for="field.key"
                                                        class="block text-sm font-medium text-gray-300 cursor-help flex items-center gap-1">
                                                        {{ field.label }}
                                                        <span v-if="field.required" class="text-red-400">*</span>
                                                        <span v-if="field.description"
                                                            class="material-icons text-[14px] text-gray-500">help_outline</span>
                                                    </label>
                                                    <p v-if="field.description" class="text-xs text-gray-500 max-w-lg">
                                                        {{ field.description }}</p>
                                                </div>

                                                <!-- Field Type: Boolean (Toggle) -->
                                                <div v-if="field.type === 'boolean'" class="flex items-center h-6">
                                                    <button
                                                        @click="updateConfigValue(field.key, !getConfigValue(field.key))"
                                                        :class="['relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none',
                                                        getConfigValue(field.key) ? 'bg-green-500' : 'bg-gray-700']">
                                                        <span
                                                            :class="['inline-block h-4 w-4 transform rounded-full bg-white transition-transform',
                                                            getConfigValue(field.key) ? 'translate-x-6' : 'translate-x-1']" />
                                                    </button>
                                                </div>
                                            </div>

                                            <!-- Field Type: String / Password / Number / Path -->
                                            <div v-if="['string', 'password', 'number', 'path'].includes(field.type)"
                                                class="mt-1">
                                                <div class="relative rounded-md shadow-sm">
                                                    <input
                                                        :type="field.type === 'password' ? (showPasswords[field.key] ? 'text' : 'password') : (field.type === 'number' ? 'number' : 'text')"
                                                        :value="getConfigValue(field.key)"
                                                        @input="updateConfigValue(field.key, $event.target.value)"
                                                        class="block w-full rounded-md bg-[#131314] border border-[#333] px-3 py-2 text-white placeholder-gray-500 focus:border-green-500 focus:ring-1 focus:ring-green-500 sm:text-sm"
                                                        :placeholder="field.type === 'path' ? '/path/to/dir' : ''">

                                                    <!-- Password Toggle -->
                                                    <div v-if="field.type === 'password'"
                                                        class="absolute inset-y-0 right-0 flex items-center pr-3">
                                                        <button @click="togglePasswordVisibility(field.key)"
                                                            class="text-gray-400 hover:text-gray-300 focus:outline-none">
                                                            <span class="material-icons text-sm">{{
                                                                showPasswords[field.key]
                                                                ? 'visibility_off' : 'visibility' }}</span>
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>

                                            <!-- Field Type: Select -->
                                            <div v-if="field.type === 'select'" class="mt-1">
                                                <select :value="getConfigValue(field.key)"
                                                    @change="updateConfigValue(field.key, $event.target.value)"
                                                    class="block w-full rounded-md bg-[#131314] border border-[#333] px-3 py-2 text-white focus:border-green-500 focus:ring-1 focus:ring-green-500 sm:text-sm">
                                                    <option v-for="opt in field.options" :key="opt.value"
                                                        :value="opt.value">
                                                        {{ opt.label }}
                                                    </option>
                                                </select>
                                            </div>

                                            <!-- Special Helper: Test Webhook Button -->
                                            <div v-if="field.key === 'notifications.webhook_url'"
                                                class="mt-2 text-right">
                                                <button @click="testWebhook(getConfigValue(field.key))"
                                                    class="text-xs px-2 py-1 bg-[#2A2B2E] hover:bg-[#333] text-green-400 rounded border border-[#333] transition-colors">
                                                    Test Webhook
                                                </button>
                                            </div>
                                        </div>
                                    </div>


                                </div>
                            </div>

                            <!-- ËßÜËßâÊ®°ÂûãÊ±† -->
                            <div v-show="configPanel === 'vision'" class="space-y-6 animate-fade-in">
                                <div class="flex items-center justify-between mb-4">
                                    <div>
                                        <h2 class="text-xl font-bold text-white flex items-center gap-2 mb-1">
                                            <span class="material-icons text-blue-400">visibility</span>
                                            ËßÜËßâÊ®°ÂûãÊ±†
                                        </h2>
                                        <p class="text-sm text-gray-400">ÈÖçÁΩÆ Qwen-VL-Max Áî®‰∫éÂõæÁâáOCRËØÜÂà´ÔºåË∂ä‰∏äË∂ä‰ºòÂÖàÔºàFailoverÈ°∫Â∫èÔºâ</p>
                                    </div>
                                    <button @click="fetchVisionModels"
                                        class="px-3 py-2 glass-input hover:bg-white/10 text-white rounded-lg text-sm flex items-center gap-2">
                                        <span class="material-icons text-sm">refresh</span> Âà∑Êñ∞
                                    </button>
                                </div>

                                <!-- Ê®°ÂûãÂç°ÁâáÂàóË°® -->
                                <div class="space-y-4">
                                    <div v-for="(model, index) in visionModels" :key="model.id"
                                        class="glass-panel rounded-xl border-transparent p-5 hover:border-blue-500/50 transition-all cursor-move backdrop-blur-sm"
                                        :draggable="true" @dragstart="onVisionDragStart(index)"
                                        @dragover.prevent="onDragOver(index)" @drop="onVisionDrop(index)">
                                        <div class="flex items-start gap-4">
                                            <span class="material-icons text-gray-500 text-2xl mt-1">drag_handle</span>
                                            <div class="flex-1">
                                                <div class="flex items-center justify-between mb-3">
                                                    <div class="flex items-center gap-3">
                                                        <span
                                                            class="px-2 py-1 bg-blue-500/20 text-blue-400 text-xs rounded">‰ºòÂÖàÁ∫ß
                                                            {{ index + 1 }}</span>
                                                        <h3 class="text-lg font-bold text-white">{{ model.name ||
                                                            'Êú™ÂëΩÂêçÊ®°Âûã' }}
                                                        </h3>
                                                    </div>
                                                    <div class="flex items-center gap-2">
                                                        <button @click.stop="testModelConnection(model)"
                                                            class="p-2 hover:bg-[#333] rounded-lg transition-colors group"
                                                            title="Test Connection">
                                                            <span class="material-icons text-lg"
                                                                :class="getTestIconClass(model)">wifi</span>
                                                        </button>
                                                        <button @click="editVisionModelCard(model)"
                                                            class="text-blue-400 hover:text-blue-300 p-2">
                                                            <span class="material-icons text-lg">{{
                                                                editingVisionModel?.id ===
                                                                model.id ? 'close' : 'edit' }}</span>
                                                        </button>
                                                        <button @click="deleteVisionModel(model.id)"
                                                            class="text-red-400 hover:text-red-300 p-2">
                                                            <span class="material-icons text-lg">delete</span>
                                                        </button>
                                                    </div>
                                                </div>

                                                <!-- ÁºñËæëÊ®°Âºè -->
                                                <div v-if="editingVisionModel?.id === model.id"
                                                    class="space-y-3 pt-3 border-t border-[#333]">
                                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                                                        <div>
                                                            <label class="block text-xs text-gray-400 mb-1">ÊòæÁ§∫ÂêçÁß∞</label>
                                                            <input v-model="editingVisionModel.name" type="text"
                                                                placeholder="e.g. Qwen-VL-Max"
                                                                class="w-full bg-[#131314] border border-[#333] rounded px-3 py-2 text-sm text-white focus:outline-none focus:border-blue-500">
                                                        </div>
                                                        <div>
                                                            <label
                                                                class="block text-xs text-gray-400 mb-1">Provider</label>
                                                            <select v-model="editingVisionModel.provider"
                                                                class="w-full bg-[#131314] border border-[#333] rounded px-3 py-2 text-sm text-white focus:outline-none focus:border-blue-500">
                                                                <option value="dashscope">Dashscope</option>
                                                            </select>
                                                        </div>
                                                        <div>
                                                            <label class="block text-xs text-gray-400 mb-1">Model
                                                                ID</label>
                                                            <input v-model="editingVisionModel.model_id" type="text"
                                                                placeholder="e.g. qwen-vl-max"
                                                                class="w-full bg-[#131314] border border-[#333] rounded px-3 py-2 text-sm text-white focus:outline-none focus:border-blue-500">
                                                        </div>
                                                        <div>
                                                            <label class="block text-xs text-gray-400 mb-1">API
                                                                Key</label>
                                                            <input v-model="editingVisionModel.api_key" type="password"
                                                                placeholder="ËæìÂÖ• DashScope API Key"
                                                                class="w-full bg-[#131314] border border-[#333] rounded px-3 py-2 text-sm text-white focus:outline-none focus:border-blue-500">
                                                        </div>
                                                    </div>
                                                    <div class="flex items-center gap-2">
                                                        <button @click="saveVisionModelCard"
                                                            class="px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white rounded text-sm">
                                                            ‰øùÂ≠ò
                                                        </button>
                                                        <button @click="cancelEditVisionModel"
                                                            class="px-4 py-2 bg-[#2A2B2E] hover:bg-[#333] text-gray-300 rounded text-sm">
                                                            ÂèñÊ∂à
                                                        </button>
                                                    </div>
                                                </div>

                                                <!-- Êü•ÁúãÊ®°Âºè -->
                                                <div v-else class="space-y-2">
                                                    <div class="grid grid-cols-2 gap-4 text-sm">
                                                        <div>
                                                            <span class="text-gray-500">Provider:</span>
                                                            <span class="text-white ml-2">{{ model.provider }}</span>
                                                        </div>
                                                        <div>
                                                            <span class="text-gray-500">Model ID:</span>
                                                            <span class="text-white ml-2">{{ model.model_id }}</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Êñ∞Ê®°ÂûãÁºñËæëË°®Âçï -->
                                    <div v-if="editingVisionModel && !editingVisionModel.id"
                                        class="bg-[#1E1F20] rounded-xl border-2 border-blue-500 p-6 mb-4">
                                        <div class="flex items-center justify-between mb-4">
                                            <h3 class="text-lg font-bold text-white">Ê∑ªÂä†Êñ∞ËßÜËßâÊ®°Âûã</h3>
                                            <button @click="cancelEditVisionModel"
                                                class="text-gray-400 hover:text-white">
                                                <span class="material-icons">close</span>
                                            </button>
                                        </div>
                                        <div class="space-y-3">
                                            <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                                                <div>
                                                    <label class="block text-xs text-gray-400 mb-1">ÊòæÁ§∫ÂêçÁß∞</label>
                                                    <input v-model="editingVisionModel.name" type="text"
                                                        placeholder="e.g. Qwen-VL-Max"
                                                        class="w-full bg-[#131314] border border-[#333] rounded px-3 py-2 text-sm text-white focus:outline-none focus:border-blue-500">
                                                </div>
                                                <div>
                                                    <label class="block text-xs text-gray-400 mb-1">Provider</label>
                                                    <select v-model="editingVisionModel.provider"
                                                        class="w-full bg-[#131314] border border-[#333] rounded px-3 py-2 text-sm text-white focus:outline-none focus:border-blue-500">
                                                        <option value="dashscope">Dashscope</option>
                                                    </select>
                                                </div>
                                                <div>
                                                    <label class="block text-xs text-gray-400 mb-1">Model ID</label>
                                                    <input v-model="editingVisionModel.model_id" type="text"
                                                        placeholder="e.g. qwen-vl-max"
                                                        class="w-full bg-[#131314] border border-[#333] rounded px-3 py-2 text-sm text-white focus:outline-none focus:border-blue-500">
                                                </div>
                                                <div>
                                                    <label class="block text-xs text-gray-400 mb-1">API Key</label>
                                                    <input v-model="editingVisionModel.api_key" type="password"
                                                        placeholder="ËæìÂÖ• DashScope API Key"
                                                        class="w-full bg-[#131314] border border-[#333] rounded px-3 py-2 text-sm text-white focus:outline-none focus:border-blue-500">
                                                </div>
                                            </div>
                                            <div class="flex items-center gap-2">
                                                <button @click="saveVisionModelCard"
                                                    class="px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white rounded text-sm">
                                                    ‰øùÂ≠ò
                                                </button>
                                                <button @click="cancelEditVisionModel"
                                                    class="px-4 py-2 bg-[#2A2B2E] hover:bg-[#333] text-gray-300 rounded text-sm">
                                                    ÂèñÊ∂à
                                                </button>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Ê∑ªÂä†Êñ∞Ê®°ÂûãÂç°Áâá -->
                                    <div v-if="!editingVisionModel || editingVisionModel.id"
                                        @click="addNewVisionModelCard"
                                        class="bg-[#1E1F20] rounded-xl border-2 border-dashed border-[#333] p-8 text-center cursor-pointer hover:border-blue-500 transition-colors">
                                        <span class="material-icons text-4xl text-gray-500 mb-2">add_circle</span>
                                        <p class="text-gray-400 text-sm">ÁÇπÂáªÊ∑ªÂä†Êñ∞ÁöÑËßÜËßâÊ®°Âûã</p>
                                    </div>

                                    <div v-if="visionModels.length === 0 && (!editingVisionModel || editingVisionModel.id)"
                                        class="text-center text-gray-500 py-12 text-sm">
                                        ÊöÇÊó†ËßÜËßâÊ®°ÂûãÔºåÁÇπÂáª‰∏äÊñπÂç°ÁâáÊ∑ªÂä†
                                    </div>
                                </div>
                            </div>

                            <!-- ËØ≠Èü≥Ê®°ÂûãÊ±† -->
                            <div v-show="configPanel === 'voice'" class="space-y-6 animate-fade-in">
                                <div class="flex items-center justify-between mb-4">
                                    <div>
                                        <h2 class="text-xl font-bold text-white flex items-center gap-2 mb-1">
                                            <span class="material-icons text-green-400">record_voice_over</span>
                                            ËØ≠Èü≥Ê®°ÂûãÊ±†
                                        </h2>
                                        <p class="text-sm text-gray-400">ÈÖçÁΩÆËØ≠Èü≥ÂêàÊàêÊ®°Âûã (TTS)ÔºåË∂ä‰∏äË∂ä‰ºòÂÖàÔºàFailoverÈ°∫Â∫èÔºâ</p>
                                    </div>
                                    <button @click="fetchVoiceModels"
                                        class="px-3 py-2 glass-input hover:bg-white/10 text-white rounded-lg text-sm flex items-center gap-2">
                                        <span class="material-icons text-sm">refresh</span> Âà∑Êñ∞
                                    </button>
                                </div>

                                <!-- Ê®°ÂûãÂç°ÁâáÂàóË°® -->
                                <div class="space-y-4">
                                    <div v-for="(model, index) in voiceModels" :key="model.id"
                                        class="glass-panel rounded-xl border-transparent p-5 hover:border-green-500/50 transition-all cursor-move backdrop-blur-sm"
                                        :draggable="true" @dragstart="onVoiceDragStart(index)"
                                        @dragover.prevent="onDragOver(index)" @drop="onVoiceDrop(index)">
                                        <div class="flex items-start gap-4">
                                            <span class="material-icons text-gray-500 text-2xl mt-1">drag_handle</span>
                                            <div class="flex-1">
                                                <div class="flex items-center justify-between mb-3">
                                                    <div class="flex items-center gap-3">
                                                        <span
                                                            class="px-2 py-1 bg-green-500/20 text-green-400 text-xs rounded">‰ºòÂÖàÁ∫ß
                                                            {{ index + 1 }}</span>
                                                        <h3 class="text-lg font-bold text-white">{{ model.name ||
                                                            'Êú™ÂëΩÂêçÊ®°Âûã' }}
                                                        </h3>
                                                    </div>
                                                    <div class="flex items-center gap-2">
                                                        <button @click.stop="testModelConnection(model)"
                                                            class="p-2 hover:bg-[#333] rounded-lg transition-colors group"
                                                            title="Test Connection">
                                                            <span class="material-icons text-lg"
                                                                :class="getTestIconClass(model)">wifi</span>
                                                        </button>
                                                        <button @click="editVoiceModelCard(model)"
                                                            class="text-green-400 hover:text-green-300 p-2">
                                                            <span class="material-icons text-lg">{{
                                                                editingVoiceModel?.id ===
                                                                model.id ? 'close' : 'edit' }}</span>
                                                        </button>
                                                        <button @click="deleteVoiceModel(model.id)"
                                                            class="text-red-400 hover:text-red-300 p-2">
                                                            <span class="material-icons text-lg">delete</span>
                                                        </button>
                                                    </div>
                                                </div>

                                                <!-- ÁºñËæëÊ®°Âºè -->
                                                <div v-if="editingVoiceModel?.id === model.id"
                                                    class="space-y-3 pt-3 border-t border-[#333]">
                                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                                                        <div>
                                                            <label class="block text-xs text-gray-400 mb-1">ÊòæÁ§∫ÂêçÁß∞</label>
                                                            <input v-model="editingVoiceModel.name" type="text"
                                                                placeholder="e.g. Paraformer"
                                                                class="w-full bg-[#131314] border border-[#333] rounded px-3 py-2 text-sm text-white focus:outline-none focus:border-green-500">
                                                        </div>
                                                        <div>
                                                            <label
                                                                class="block text-xs text-gray-400 mb-1">Provider</label>
                                                            <select v-model="editingVoiceModel.provider"
                                                                class="w-full bg-[#131314] border border-[#333] rounded px-3 py-2 text-sm text-white focus:outline-none focus:border-green-500">
                                                                <option value="dashscope">Dashscope (Aliyun)</option>
                                                                <option value="openai">OpenAI (Coming Soon)</option>
                                                            </select>
                                                        </div>
                                                        <div>
                                                            <label class="block text-xs text-gray-400 mb-1">Model
                                                                ID</label>
                                                            <input v-model="editingVoiceModel.model_id" type="text"
                                                                placeholder="e.g. sambert-zhichu-v1"
                                                                class="w-full bg-[#131314] border border-[#333] rounded px-3 py-2 text-sm text-white focus:outline-none focus:border-green-500">
                                                        </div>
                                                        <div>
                                                            <label class="block text-xs text-gray-400 mb-1">API
                                                                Key</label>
                                                            <input v-model="editingVoiceModel.api_key" type="password"
                                                                placeholder="ËæìÂÖ• API Key"
                                                                class="w-full bg-[#131314] border border-[#333] rounded px-3 py-2 text-sm text-white focus:outline-none focus:border-green-500">
                                                        </div>
                                                        <div class="md:col-span-2">
                                                            <label class="block text-xs text-gray-400 mb-1">Èü≥Ëâ≤ ID (Voice
                                                                ID)</label>
                                                            <input v-model="editingVoiceModel.config.voice_id"
                                                                type="text"
                                                                placeholder="e.g. longxiaochun, zhiyan_emo (Default: longxiaochun)"
                                                                class="w-full bg-[#131314] border border-[#333] rounded px-3 py-2 text-sm text-white focus:outline-none focus:border-green-500">
                                                            <p class="text-[10px] text-gray-500 mt-1">
                                                                DashScope Èü≥Ëâ≤ÂèÇËÄÉ: longxiaochun (Ê∏©È¶®), zhiyan_emo (Áü•ÊÄß),
                                                                sambert-zhimiao-v1 (ÂèØÁà±) Á≠â„ÄÇ
                                                            </p>
                                                        </div>
                                                    </div>
                                                    <div class="flex items-center gap-2">
                                                        <button @click="saveVoiceModelCard"
                                                            class="px-4 py-2 bg-green-600 hover:bg-green-500 text-white rounded text-sm">
                                                            ‰øùÂ≠ò
                                                        </button>
                                                        <button @click="cancelEditVoiceModel"
                                                            class="px-4 py-2 bg-[#2A2B2E] hover:bg-[#333] text-gray-300 rounded text-sm">
                                                            ÂèñÊ∂à
                                                        </button>
                                                    </div>
                                                </div>

                                                <!-- Êü•ÁúãÊ®°Âºè -->
                                                <div v-else class="space-y-2">
                                                    <div class="grid grid-cols-2 gap-4 text-sm">
                                                        <div>
                                                            <span class="text-gray-500">Provider:</span>
                                                            <span class="text-white ml-2">{{ model.provider }}</span>
                                                        </div>
                                                        <div>
                                                            <span class="text-gray-500">Model ID:</span>
                                                            <span class="text-white ml-2">{{ model.model_id }}</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Êñ∞Ê®°ÂûãÁºñËæëË°®Âçï -->
                                    <div v-if="editingVoiceModel && !editingVoiceModel.id"
                                        class="bg-[#1E1F20] rounded-xl border-2 border-green-500 p-6 mb-4">
                                        <div class="flex items-center justify-between mb-4">
                                            <h3 class="text-lg font-bold text-white">Ê∑ªÂä†Êñ∞ËØ≠Èü≥Ê®°Âûã</h3>
                                            <button @click="cancelEditVoiceModel"
                                                class="text-gray-400 hover:text-white">
                                                <span class="material-icons">close</span>
                                            </button>
                                        </div>
                                        <div class="space-y-3">
                                            <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                                                <div>
                                                    <label class="block text-xs text-gray-400 mb-1">ÊòæÁ§∫ÂêçÁß∞</label>
                                                    <input v-model="editingVoiceModel.name" type="text"
                                                        placeholder="e.g. My Voice Model"
                                                        class="w-full bg-[#131314] border border-[#333] rounded px-3 py-2 text-sm text-white focus:outline-none focus:border-green-500">
                                                </div>
                                                <div>
                                                    <label class="block text-xs text-gray-400 mb-1">Provider</label>
                                                    <select v-model="editingVoiceModel.provider"
                                                        class="w-full bg-[#131314] border border-[#333] rounded px-3 py-2 text-sm text-white focus:outline-none focus:border-green-500">
                                                        <option value="dashscope">Dashscope (Aliyun)</option>
                                                        <option value="openai">OpenAI (Coming Soon)</option>
                                                    </select>
                                                </div>
                                                <div>
                                                    <label class="block text-xs text-gray-400 mb-1">Model ID</label>
                                                    <input v-model="editingVoiceModel.model_id" type="text"
                                                        placeholder="e.g. sambert-zhichu-v1"
                                                        class="w-full bg-[#131314] border border-[#333] rounded px-3 py-2 text-sm text-white focus:outline-none focus:border-green-500">
                                                </div>
                                                <div>
                                                    <label class="block text-xs text-gray-400 mb-1">API Key</label>
                                                    <input v-model="editingVoiceModel.api_key" type="password"
                                                        placeholder="ËæìÂÖ• API Key"
                                                        class="w-full bg-[#131314] border border-[#333] rounded px-3 py-2 text-sm text-white focus:outline-none focus:border-green-500">
                                                </div>
                                            </div>
                                            <div class="flex items-center gap-2">
                                                <button @click="saveVoiceModelCard"
                                                    class="px-4 py-2 bg-green-600 hover:bg-green-500 text-white rounded text-sm">
                                                    ‰øùÂ≠ò
                                                </button>
                                                <button @click="cancelEditVoiceModel"
                                                    class="px-4 py-2 bg-[#2A2B2E] hover:bg-[#333] text-gray-300 rounded text-sm">
                                                    ÂèñÊ∂à
                                                </button>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Ê∑ªÂä†Êñ∞Ê®°ÂûãÂç°Áâá -->
                                    <div v-if="!editingVoiceModel || editingVoiceModel.id" @click="addNewVoiceModelCard"
                                        class="bg-[#1E1F20] rounded-xl border-2 border-dashed border-[#333] p-8 text-center cursor-pointer hover:border-green-500 transition-colors">
                                        <span class="material-icons text-4xl text-gray-500 mb-2">add_circle</span>
                                        <p class="text-gray-400 text-sm">ÁÇπÂáªÊ∑ªÂä†Êñ∞ÁöÑËØ≠Èü≥Ê®°Âûã</p>
                                    </div>

                                    <div v-if="voiceModels.length === 0 && (!editingVoiceModel || editingVoiceModel.id)"
                                        class="text-center text-gray-500 py-12 text-sm">
                                        ÊöÇÊó†ËØ≠Èü≥Ê®°ÂûãÔºåÁÇπÂáª‰∏äÊñπÂç°ÁâáÊ∑ªÂä†
                                    </div>
                                </div>
                            </div>

                            <!-- Âê¨ËßâÊ®°ÂûãÊ±† (STT) -->
                            <!-- Âê¨ËßâÊ®°ÂûãÊ±† (STT) -->
                            <div v-show="configPanel === 'hearing'" class="space-y-6 animate-fade-in">
                                <div class="flex items-center justify-between mb-4">
                                    <div>
                                        <h2 class="text-xl font-bold text-white flex items-center gap-2 mb-1">
                                            <span class="material-icons text-blue-400">hearing</span>
                                            Âê¨ËßâÊ®°ÂûãÊ±†
                                        </h2>
                                        <p class="text-sm text-gray-400">ÈÖçÁΩÆËØ≠Èü≥ËØÜÂà´Ê®°Âûã (STT/ASR)ÔºåÁî®‰∫éËØ≠Èü≥ËΩ¨ÊñáÂ≠ó</p>
                                    </div>
                                    <button @click="fetchHearingModels"
                                        class="px-3 py-2 glass-input hover:bg-white/10 text-white rounded-lg text-sm flex items-center gap-2">
                                        <span class="material-icons text-sm">refresh</span> Âà∑Êñ∞
                                    </button>
                                </div>

                                <!-- Ê®°ÂûãÂç°ÁâáÂàóË°® -->
                                <div class="space-y-4">
                                    <div v-for="(model, index) in hearingModels" :key="model.id"
                                        class="glass-panel rounded-xl border-transparent p-5 hover:border-blue-500/50 transition-all cursor-move backdrop-blur-sm"
                                        :draggable="true" @dragstart="onHearingDragStart(index)"
                                        @dragover.prevent="onDragOver(index)" @drop="onHearingDrop(index)">
                                        <div class="flex items-start gap-4">
                                            <span class="material-icons text-gray-500 text-2xl mt-1">drag_handle</span>
                                            <div class="flex-1">
                                                <div class="flex items-center justify-between mb-3">
                                                    <div class="flex items-center gap-3">
                                                        <span
                                                            class="px-2 py-1 bg-blue-500/20 text-blue-400 text-xs rounded">‰ºòÂÖàÁ∫ß
                                                            {{ index + 1 }}</span>
                                                        <h3 class="text-lg font-bold text-white">{{ model.name ||
                                                            'Êú™ÂëΩÂêçÊ®°Âûã' }}
                                                        </h3>
                                                    </div>
                                                    <div class="flex items-center gap-2">
                                                        <button @click.stop="testModelConnection(model)"
                                                            class="p-2 hover:bg-[#333] rounded-lg transition-colors group"
                                                            title="Test Connection">
                                                            <span class="material-icons text-lg"
                                                                :class="getTestIconClass(model)">wifi</span>
                                                        </button>
                                                        <button @click="editHearingModelCard(model)"
                                                            class="text-blue-400 hover:text-blue-300 p-2">
                                                            <span class="material-icons text-lg">{{
                                                                editingHearingModel?.id ===
                                                                model.id ? 'close' : 'edit' }}</span>
                                                        </button>
                                                        <button @click="deleteHearingModel(model.id)"
                                                            class="text-red-400 hover:text-red-300 p-2">
                                                            <span class="material-icons text-lg">delete</span>
                                                        </button>
                                                    </div>
                                                </div>

                                                <!-- ÁºñËæëÊ®°Âºè -->
                                                <div v-if="editingHearingModel?.id === model.id"
                                                    class="space-y-3 pt-3 border-t border-[#333]">
                                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                                                        <div>
                                                            <label class="block text-xs text-gray-400 mb-1">ÊòæÁ§∫ÂêçÁß∞</label>
                                                            <input v-model="editingHearingModel.name" type="text"
                                                                placeholder="e.g. Paraformer"
                                                                class="w-full bg-[#131314] border border-[#333] rounded px-3 py-2 text-sm text-white focus:outline-none focus:border-blue-500">
                                                        </div>
                                                        <div>
                                                            <label
                                                                class="block text-xs text-gray-400 mb-1">Provider</label>
                                                            <select v-model="editingHearingModel.provider"
                                                                class="w-full bg-[#131314] border border-[#333] rounded px-3 py-2 text-sm text-white focus:outline-none focus:border-blue-500">
                                                                <option value="dashscope">Dashscope (Aliyun)</option>
                                                                <option value="openai">OpenAI (Coming Soon)</option>
                                                            </select>
                                                        </div>
                                                        <div>
                                                            <label class="block text-xs text-gray-400 mb-1">Model
                                                                ID</label>
                                                            <input v-model="editingHearingModel.model_id" type="text"
                                                                placeholder="e.g. paraformer-zh"
                                                                class="w-full bg-[#131314] border border-[#333] rounded px-3 py-2 text-sm text-white focus:outline-none focus:border-blue-500">
                                                        </div>
                                                        <div>
                                                            <label class="block text-xs text-gray-400 mb-1">API
                                                                Key</label>
                                                            <input v-model="editingHearingModel.api_key" type="password"
                                                                placeholder="ËæìÂÖ• API Key"
                                                                class="w-full bg-[#131314] border border-[#333] rounded px-3 py-2 text-sm text-white focus:outline-none focus:border-blue-500">
                                                        </div>
                                                    </div>
                                                    <div class="flex items-center gap-2">
                                                        <button @click="saveHearingModelCard"
                                                            class="px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white rounded text-sm">
                                                            ‰øùÂ≠ò
                                                        </button>
                                                        <button @click="cancelEditHearingModel"
                                                            class="px-4 py-2 bg-[#2A2B2E] hover:bg-[#333] text-gray-300 rounded text-sm">
                                                            ÂèñÊ∂à
                                                        </button>
                                                    </div>
                                                </div>

                                                <!-- Êü•ÁúãÊ®°Âºè -->
                                                <div v-else class="space-y-2">
                                                    <div class="grid grid-cols-2 gap-4 text-sm">
                                                        <div>
                                                            <span class="text-gray-500">Provider:</span>
                                                            <span class="text-white ml-2">{{ model.provider }}</span>
                                                        </div>
                                                        <div>
                                                            <span class="text-gray-500">Model ID:</span>
                                                            <span class="text-white ml-2">{{ model.model_id }}</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Êñ∞Ê®°ÂûãÁºñËæëË°®Âçï -->
                                    <div v-if="editingHearingModel && !editingHearingModel.id"
                                        class="bg-[#1E1F20] rounded-xl border-2 border-blue-500 p-6 mb-4">
                                        <div class="flex items-center justify-between mb-4">
                                            <h3 class="text-lg font-bold text-white">Ê∑ªÂä†Êñ∞Âê¨ËßâÊ®°Âûã</h3>
                                            <button @click="cancelEditHearingModel"
                                                class="text-gray-400 hover:text-white">
                                                <span class="material-icons">close</span>
                                            </button>
                                        </div>
                                        <div class="space-y-3">
                                            <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                                                <div>
                                                    <label class="block text-xs text-gray-400 mb-1">ÊòæÁ§∫ÂêçÁß∞</label>
                                                    <input v-model="editingHearingModel.name" type="text"
                                                        placeholder="e.g. My Hearing Model"
                                                        class="w-full bg-[#131314] border border-[#333] rounded px-3 py-2 text-sm text-white focus:outline-none focus:border-blue-500">
                                                </div>
                                                <div>
                                                    <label class="block text-xs text-gray-400 mb-1">Provider</label>
                                                    <select v-model="editingHearingModel.provider"
                                                        class="w-full bg-[#131314] border border-[#333] rounded px-3 py-2 text-sm text-white focus:outline-none focus:border-blue-500">
                                                        <option value="dashscope">Dashscope (Aliyun)</option>
                                                        <option value="openai">OpenAI (Coming Soon)</option>
                                                    </select>
                                                </div>
                                                <div>
                                                    <label class="block text-xs text-gray-400 mb-1">Model ID</label>
                                                    <input v-model="editingHearingModel.model_id" type="text"
                                                        placeholder="e.g. paraformer-zh"
                                                        class="w-full bg-[#131314] border border-[#333] rounded px-3 py-2 text-sm text-white focus:outline-none focus:border-blue-500">
                                                </div>
                                                <div>
                                                    <label class="block text-xs text-gray-400 mb-1">API Key</label>
                                                    <input v-model="editingHearingModel.api_key" type="password"
                                                        placeholder="ËæìÂÖ• API Key"
                                                        class="w-full bg-[#131314] border border-[#333] rounded px-3 py-2 text-sm text-white focus:outline-none focus:border-blue-500">
                                                </div>
                                            </div>
                                            <div class="flex items-center gap-2">
                                                <button @click="saveHearingModelCard"
                                                    class="px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white rounded text-sm">
                                                    ‰øùÂ≠ò
                                                </button>
                                                <button @click="cancelEditHearingModel"
                                                    class="px-4 py-2 bg-[#2A2B2E] hover:bg-[#333] text-gray-300 rounded text-sm">
                                                    ÂèñÊ∂à
                                                </button>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Ê∑ªÂä†Êñ∞Ê®°ÂûãÂç°Áâá -->
                                    <div v-if="!editingHearingModel || editingHearingModel.id"
                                        @click="addNewHearingModelCard"
                                        class="bg-[#1E1F20] rounded-xl border-2 border-dashed border-[#333] p-8 text-center cursor-pointer hover:border-blue-500 transition-colors">
                                        <span class="material-icons text-4xl text-gray-500 mb-2">add_circle</span>
                                        <p class="text-gray-400 text-sm">ÁÇπÂáªÊ∑ªÂä†Êñ∞ÁöÑÂê¨ËßâÊ®°Âûã</p>
                                    </div>

                                    <div v-if="hearingModels.length === 0 && (!editingHearingModel || editingHearingModel.id)"
                                        class="text-center text-gray-500 py-12 text-sm">
                                        ÊöÇÊó†Âê¨ËßâÊ®°ÂûãÔºåÁÇπÂáª‰∏äÊñπÂç°ÁâáÊ∑ªÂä†
                                    </div>
                                </div>
                            </div>

                            <!-- ËÆ∞ÂøÜÊ®°ÂûãÊ±† -->
                            <div v-show="configPanel === 'memory'" class="space-y-6 animate-fade-in">
                                <div class="flex items-center justify-between mb-4">
                                    <div>
                                        <h2 class="text-xl font-bold text-white flex items-center gap-2 mb-1">
                                            <span class="material-icons text-purple-400">memory</span>
                                            ËÆ∞ÂøÜÊ®°ÂûãÊ±†
                                        </h2>
                                        <p class="text-sm text-gray-400">ÈÖçÁΩÆ Embedding APIÔºåÁî®‰∫éÁîüÊàêÊñáÊú¨ÂêëÈáèÔºåË∂ä‰∏äË∂ä‰ºòÂÖàÔºàFailoverÈ°∫Â∫èÔºâ</p>
                                    </div>
                                    <button @click="fetchMemoryModels"
                                        class="px-3 py-2 glass-input hover:bg-white/10 text-white rounded-lg text-sm flex items-center gap-2">
                                        <span class="material-icons text-sm">refresh</span> Âà∑Êñ∞
                                    </button>
                                </div>

                                <!-- Ê®°ÂûãÂç°ÁâáÂàóË°® -->
                                <div class="space-y-4">
                                    <div v-for="(model, index) in memoryModels" :key="model.id"
                                        class="glass-panel rounded-xl border-transparent p-5 hover:border-purple-500/50 transition-all cursor-move backdrop-blur-sm"
                                        :draggable="true" @dragstart="onMemoryDragStart(index)"
                                        @dragover.prevent="onDragOver(index)" @drop="onMemoryDrop(index)">
                                        <div class="flex items-start gap-4">
                                            <span class="material-icons text-gray-500 text-2xl mt-1">drag_handle</span>
                                            <div class="flex-1">
                                                <div class="flex items-center justify-between mb-3">
                                                    <div class="flex items-center gap-3">
                                                        <span
                                                            class="px-2 py-1 bg-purple-500/20 text-purple-400 text-xs rounded">‰ºòÂÖàÁ∫ß
                                                            {{ index + 1 }}</span>
                                                        <h3 class="text-lg font-bold text-white">{{ model.name ||
                                                            'Êú™ÂëΩÂêçÊ®°Âûã' }}
                                                        </h3>
                                                    </div>
                                                    <div class="flex items-center gap-2">
                                                        <button @click.stop="testModelConnection(model)"
                                                            class="p-2 hover:bg-[#333] rounded-lg transition-colors group"
                                                            title="Test Connection">
                                                            <span class="material-icons text-lg"
                                                                :class="getTestIconClass(model)">wifi</span>
                                                        </button>
                                                        <button @click="editMemoryModelCard(model)"
                                                            class="text-purple-400 hover:text-purple-300 p-2">
                                                            <span class="material-icons text-lg">{{
                                                                editingMemoryModel?.id ===
                                                                model.id ? 'close' : 'edit' }}</span>
                                                        </button>
                                                        <button @click="deleteMemoryModel(model.id)"
                                                            class="text-red-400 hover:text-red-300 p-2">
                                                            <span class="material-icons text-lg">delete</span>
                                                        </button>
                                                    </div>
                                                </div>

                                                <!-- ÁºñËæëÊ®°Âºè -->
                                                <div v-if="editingMemoryModel?.id === model.id"
                                                    class="space-y-3 pt-3 border-t border-[#333]">
                                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                                                        <div>
                                                            <label class="block text-xs text-gray-400 mb-1">ÊòæÁ§∫ÂêçÁß∞</label>
                                                            <input v-model="editingMemoryModel.name" type="text"
                                                                placeholder="e.g. Embedding Model"
                                                                class="w-full bg-[#131314] border border-[#333] rounded px-3 py-2 text-sm text-white focus:outline-none focus:border-purple-500">
                                                        </div>
                                                        <div>
                                                            <label
                                                                class="block text-xs text-gray-400 mb-1">Provider</label>
                                                            <select v-model="editingMemoryModel.provider"
                                                                class="w-full bg-[#131314] border border-[#333] rounded px-3 py-2 text-sm text-white focus:outline-none focus:border-purple-500">
                                                                <option value="dashscope">Dashscope</option>
                                                            </select>
                                                        </div>
                                                        <div>
                                                            <label class="block text-xs text-gray-400 mb-1">Model
                                                                ID</label>
                                                            <input v-model="editingMemoryModel.model_id" type="text"
                                                                placeholder="e.g. text-embedding-v2"
                                                                class="w-full bg-[#131314] border border-[#333] rounded px-3 py-2 text-sm text-white focus:outline-none focus:border-purple-500">
                                                        </div>
                                                        <div>
                                                            <label class="block text-xs text-gray-400 mb-1">API
                                                                Key</label>
                                                            <input v-model="editingMemoryModel.api_key" type="password"
                                                                placeholder="ËæìÂÖ• DashScope API Key"
                                                                class="w-full bg-[#131314] border border-[#333] rounded px-3 py-2 text-sm text-white focus:outline-none focus:border-purple-500">
                                                        </div>
                                                    </div>
                                                    <div class="flex items-center gap-2">
                                                        <button @click="saveMemoryModelCard"
                                                            class="px-4 py-2 bg-purple-600 hover:bg-purple-500 text-white rounded text-sm">
                                                            ‰øùÂ≠ò
                                                        </button>
                                                        <button @click="cancelEditMemoryModel"
                                                            class="px-4 py-2 bg-[#2A2B2E] hover:bg-[#333] text-gray-300 rounded text-sm">
                                                            ÂèñÊ∂à
                                                        </button>
                                                    </div>
                                                </div>

                                                <!-- Êü•ÁúãÊ®°Âºè -->
                                                <div v-else class="space-y-2">
                                                    <div class="grid grid-cols-2 gap-4 text-sm">
                                                        <div>
                                                            <span class="text-gray-500">Provider:</span>
                                                            <span class="text-white ml-2">{{ model.provider }}</span>
                                                        </div>
                                                        <div>
                                                            <span class="text-gray-500">Model ID:</span>
                                                            <span class="text-white ml-2">{{ model.model_id }}</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Êñ∞Ê®°ÂûãÁºñËæëË°®Âçï -->
                                    <div v-if="editingMemoryModel && !editingMemoryModel.id"
                                        class="bg-[#1E1F20] rounded-xl border-2 border-purple-500 p-6 mb-4">
                                        <div class="flex items-center justify-between mb-4">
                                            <h3 class="text-lg font-bold text-white">Ê∑ªÂä†Êñ∞ËÆ∞ÂøÜÊ®°Âûã</h3>
                                            <button @click="cancelEditMemoryModel"
                                                class="text-gray-400 hover:text-white">
                                                <span class="material-icons">close</span>
                                            </button>
                                        </div>
                                        <div class="space-y-3">
                                            <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                                                <div>
                                                    <label class="block text-xs text-gray-400 mb-1">ÊòæÁ§∫ÂêçÁß∞</label>
                                                    <input v-model="editingMemoryModel.name" type="text"
                                                        placeholder="e.g. Embedding Model"
                                                        class="w-full bg-[#131314] border border-[#333] rounded px-3 py-2 text-sm text-white focus:outline-none focus:border-purple-500">
                                                </div>
                                                <div>
                                                    <label class="block text-xs text-gray-400 mb-1">Provider</label>
                                                    <select v-model="editingMemoryModel.provider"
                                                        class="w-full bg-[#131314] border border-[#333] rounded px-3 py-2 text-sm text-white focus:outline-none focus:border-purple-500">
                                                        <option value="dashscope">Dashscope</option>
                                                    </select>
                                                </div>
                                                <div>
                                                    <label class="block text-xs text-gray-400 mb-1">Model ID</label>
                                                    <input v-model="editingMemoryModel.model_id" type="text"
                                                        placeholder="e.g. text-embedding-v2"
                                                        class="w-full bg-[#131314] border border-[#333] rounded px-3 py-2 text-sm text-white focus:outline-none focus:border-purple-500">
                                                </div>
                                                <div>
                                                    <label class="block text-xs text-gray-400 mb-1">API Key</label>
                                                    <input v-model="editingMemoryModel.api_key" type="password"
                                                        placeholder="ËæìÂÖ• DashScope API Key"
                                                        class="w-full bg-[#131314] border border-[#333] rounded px-3 py-2 text-sm text-white focus:outline-none focus:border-purple-500">
                                                </div>
                                            </div>
                                            <div class="flex items-center gap-2">
                                                <button @click="saveMemoryModelCard"
                                                    class="px-4 py-2 bg-purple-600 hover:bg-purple-500 text-white rounded text-sm">
                                                    ‰øùÂ≠ò
                                                </button>
                                                <button @click="cancelEditMemoryModel"
                                                    class="px-4 py-2 bg-[#2A2B2E] hover:bg-[#333] text-gray-300 rounded text-sm">
                                                    ÂèñÊ∂à
                                                </button>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Ê∑ªÂä†Êñ∞Ê®°ÂûãÂç°Áâá -->
                                    <div v-if="!editingMemoryModel || editingMemoryModel.id"
                                        @click="addNewMemoryModelCard"
                                        class="bg-[#1E1F20] rounded-xl border-2 border-dashed border-[#333] p-8 text-center cursor-pointer hover:border-purple-500 transition-colors">
                                        <span class="material-icons text-4xl text-gray-500 mb-2">add_circle</span>
                                        <p class="text-gray-400 text-sm">ÁÇπÂáªÊ∑ªÂä†Êñ∞ÁöÑËÆ∞ÂøÜÊ®°Âûã</p>
                                    </div>

                                    <div v-if="memoryModels.length === 0 && (!editingMemoryModel || editingMemoryModel.id)"
                                        class="text-center text-gray-500 py-12 text-sm">
                                        ÊöÇÊó†ËÆ∞ÂøÜÊ®°ÂûãÔºåÁÇπÂáª‰∏äÊñπÂç°ÁâáÊ∑ªÂä†
                                    </div>
                                </div>
                            </div>




                            <!-- Á≥ªÁªüÊó•ÂøóÈù¢Êùø -->
                            <div v-show="configPanel === 'logs'" class="space-y-6 animate-fade-in">
                                <div class="glass-panel rounded-xl border-transparent overflow-hidden backdrop-blur-sm">
                                    <div
                                        class="h-14 bg-black/40 flex items-center justify-between px-6 border-b border-white/5 text-gray-400 shrink-0">
                                        <span class="font-bold neon-text">SYSTEM LOGS</span>
                                        <button @click="fetchLogs" class="hover:text-white"><span
                                                class="material-icons">refresh</span></button>
                                    </div>
                                    <div class="bg-black/60 flex flex-col font-mono text-xs h-[600px]">
                                        <div class="flex-1 overflow-y-auto p-6 space-y-2 text-[#4AF626]" ref="logBox">
                                            <div v-for="(line, i) in systemLogs" :key="i"
                                                class="break-all hover:bg-white/5 p-1 rounded">{{
                                                line }}</div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Á≥ªÁªüÈù¢ÊùøÔºà‰ªÖ‰øùÁïôÊï∞ÊçÆÁÆ°ÁêÜÔºâ -->
                            <div v-show="configPanel === 'system'" class="space-y-6 animate-fade-in">
                                <!-- Êï∞ÊçÆÁÆ°ÁêÜ -->
                                <div class="glass-panel rounded-xl border-transparent p-6 backdrop-blur-sm">
                                    <h2 class="text-lg font-bold text-white flex items-center gap-2 mb-4">
                                        <span class="material-icons text-blue-400 text-xl">storage</span>
                                        Êï∞ÊçÆÁÆ°ÁêÜ
                                    </h2>
                                    <div class="bg-red-900/20 border border-red-500/50 rounded-xl p-4 mb-6">
                                        <div class="flex items-center gap-2 text-red-400 mb-2">
                                            <span class="material-icons">warning</span>
                                            <span class="font-bold">Âç±Èô©Êìç‰ΩúÂå∫Âüü</span>
                                        </div>
                                        <p class="text-sm text-gray-400">
                                            ‰ª•‰∏ãÊìç‰ΩúÂ∞ÜÊ∞∏‰πÖÂà†Èô§Êï∞ÊçÆÔºåËØ∑Ë∞®ÊÖé‰ΩøÁî®„ÄÇÊ≠§ÂäüËÉΩ‰ªÖÁî®‰∫éÂºÄÂèëÊµãËØïÔºåÁ≥ªÁªüÊê≠Âª∫ÂÆåÊØïÂêéÂ∞ÜÂà†Èô§„ÄÇ
                                        </p>
                                    </div>

                                    <div
                                        class="glass-panel rounded-xl border-transparent p-6 bg-red-900/10 border-red-500/30">
                                        <h2 class="text-lg font-bold text-white flex items-center gap-2 mb-4">
                                            <span class="material-icons text-red-400 text-xl">delete_forever</span>
                                            Ê∏ÖÁ©∫ÊâÄÊúâÊï∞ÊçÆ
                                        </h2>
                                        <p class="text-sm text-gray-400 mb-4">
                                            Ê≠§Êìç‰ΩúÂ∞ÜÂà†Èô§ÊâÄÊúâÂΩíÊ°£ËÆ∞ÂΩïÂíåÁâ©ÁêÜÊñá‰ª∂ÔºåÊó†Ê≥ïÊÅ¢Â§ç„ÄÇ
                                        </p>
                                        <div class="flex items-center gap-4">
                                            <input type="checkbox" v-model="clearDataConfirm" class="w-4 h-4">
                                            <label class="text-sm text-gray-300">ÊàëÂ∑≤Á°ÆËÆ§Ë¶ÅÊ∏ÖÁ©∫ÊâÄÊúâÊï∞ÊçÆ</label>
                                        </div>
                                        <button @click="clearAllData" :disabled="!clearDataConfirm || isClearingData"
                                            class="mt-4 px-6 py-2 bg-red-600 hover:bg-red-500 text-white rounded-lg text-sm flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed">
                                            <span class="material-icons text-sm">delete_forever</span>
                                            {{ isClearingData ? 'Ê∏ÖÁ©∫‰∏≠...' : 'Ê∏ÖÁ©∫ÊâÄÊúâÊï∞ÊçÆ' }}
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <!-- Êï∞ÊçÆÂ∫ìÈù¢Êùø -->
                            <div v-show="configPanel === 'database'" class="space-y-6 animate-fade-in">
                                <div class="grid grid-cols-4 gap-6 h-[calc(100vh-200px)]">
                                    <!-- Ë°®ÂàóË°® -->
                                    <div
                                        class="col-span-1 glass-panel rounded-xl border-transparent flex flex-col overflow-hidden backdrop-blur-sm">
                                        <div class="p-3 border-b border-white/5 flex items-center justify-between">
                                            <span class="text-sm font-bold text-gray-300">Êï∞ÊçÆË°® (Tables)</span>
                                            <button @click="fetchDbTables" class="text-gray-400 hover:text-white">
                                                <span class="material-icons text-sm">refresh</span>
                                            </button>
                                        </div>
                                        <div class="flex-1 overflow-y-auto p-2 space-y-1">
                                            <button v-for="table in dbTables" :key="table"
                                                @click="selectAllFromTable(table)"
                                                class="w-full text-left px-3 py-2 text-xs text-gray-400 hover:bg-[#333] hover:text-white rounded transition-colors truncate">
                                                {{ table }}
                                            </button>
                                        </div>
                                    </div>

                                    <!-- SQL ÊâßË°åÂå∫Âüü -->
                                    <div class="col-span-3 flex flex-col gap-4">
                                        <!-- Editor -->
                                        <div
                                            class="glass-panel rounded-xl border-transparent p-4 flex flex-col gap-3 backdrop-blur-sm">
                                            <div class="flex items-center justify-between">
                                                <span class="text-sm font-bold text-gray-300">SQL ÁºñËæëÂô®</span>
                                                <div class="flex gap-2">
                                                    <button @click="sqlQuery = ''"
                                                        class="text-xs text-gray-500 hover:text-white px-2">Ê∏ÖÁ©∫</span>
                                                        <button @click="executeSql" :disabled="isExecutingQuery"
                                                            class="px-3 py-1 bg-blue-600 hover:bg-blue-500 text-white rounded text-xs flex items-center gap-1">
                                                            <span class="material-icons text-xs">play_arrow</span> ËøêË°å
                                                        </button>
                                                </div>
                                            </div>
                                            <textarea v-model="sqlQuery"
                                                class="w-full h-24 bg-black/40 text-gray-300 font-mono text-xs p-3 rounded border border-white/10 focus:outline-none focus:border-blue-500 glass-input"
                                                placeholder="SELECT * FROM users LIMIT 10;"></textarea>
                                            <div v-if="queryError"
                                                class="text-xs text-red-400 font-mono bg-red-900/20 p-2 rounded">
                                                {{ queryError }}
                                            </div>
                                        </div>

                                        <!-- Results -->
                                        <div
                                            class="glass-panel rounded-xl border-transparent flex-1 flex flex-col overflow-hidden backdrop-blur-sm">
                                            <div class="p-3 border-b border-white/5 flex items-center justify-between">
                                                <span class="text-sm font-bold text-gray-300">Êü•ËØ¢ÁªìÊûú</span>
                                                <span v-if="queryResult?.rows" class="text-xs text-gray-500">{{
                                                    queryResult.rows.length }} Ë°å</span>
                                            </div>
                                            <!-- Top Horizontal Scrollbar -->
                                            <div ref="topScroll"
                                                class="overflow-x-auto border-b border-white/5 bg-black/20"
                                                @scroll="syncScroll('top')" v-show="queryResult">
                                                <div :style="{ width: tableWidth + 'px', height: '12px' }"></div>
                                            </div>
                                            <div ref="tableContainer" class="flex-1 overflow-auto pb-20"
                                                @scroll="syncScroll('table')">
                                                <table ref="dataTable" v-if="queryResult && queryResult.columns"
                                                    class="w-full text-left border-collapse">
                                                    <thead>
                                                        <tr class="bg-black/20">
                                                            <th v-for="col in queryResult.columns" :key="col"
                                                                class="p-2 text-xs text-gray-300 font-medium border-b border-white/5 sticky top-0 bg-black/40 backdrop-blur-sm">
                                                                {{ col }}
                                                            </th>
                                                        </tr>
                                                    </thead>
                                                    <tbody class="divide-y divide-white/5">
                                                        <tr v-for="(row, i) in queryResult.rows" :key="i"
                                                            class="hover:bg-white/5">
                                                            <td v-for="(cell, j) in row" :key="j"
                                                                @dblclick="showLongTextModal(cell)"
                                                                class="p-2 text-xs text-gray-500 max-w-[200px] truncate cursor-pointer hover:bg-white/10">
                                                                <div v-if="cell && cell.length > 50"
                                                                    class="flex items-center gap-2">
                                                                    <span class="truncate max-w-[150px]">{{ cell
                                                                        }}</span>
                                                                    <button @click="showLongTextModal(cell)"
                                                                        class="text-[10px] px-1.5 py-0.5 bg-blue-900/30 text-blue-400 rounded hover:bg-blue-900/50">View</button>
                                                                </div>
                                                                <span v-else>{{ cell }}</span>
                                                            </td>
                                                        </tr>
                                                        <!-- Bottom Spacer for Comfortable Scrolling -->
                                                        <tr
                                                            v-if="queryResult && queryResult.rows && queryResult.rows.length > 0">
                                                            <td :colspan="queryResult.columns.length"
                                                                class="h-20 border-0 bg-transparent p-0"></td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                                <div v-else
                                                    class="h-full flex items-center justify-center text-gray-600 text-xs">
                                                    No results to display
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Áî®Êà∑ÁÆ°ÁêÜÈ°µÈù¢ -->
                <div v-show="currentView === 'user'"
                    class="absolute inset-0 bg-black/80 flex overflow-hidden z-40 backdrop-blur-md">
                    <!-- Â∑¶‰æßÂØºËà™Ê†è -->
                    <div class="w-64 glass-panel border-r border-white/5 flex flex-col overflow-y-auto rounded-none">
                        <div class="p-4 border-b border-white/5">
                            <h2 class="text-lg font-bold text-white flex items-center gap-2">
                                <span class="material-icons text-blue-500">account_circle</span>
                                Áî®Êà∑ÁÆ°ÁêÜ
                            </h2>
                        </div>
                        <nav class="flex-1 p-2 space-y-1">
                            <button @click="userPanel = 'profile'"
                                :class="['w-full flex items-center gap-3 px-4 py-2 rounded-lg transition-colors text-left text-sm',
                                userPanel === 'profile' ? 'bg-[#2A2B2E] text-blue-400' : 'text-gray-400 hover:bg-[#2A2B2E] hover:text-white']">
                                <span class="material-icons text-lg">person</span>
                                <span>‰∏™‰∫∫ËµÑÊñô</span>
                            </button>
                            <button v-if="isAdmin" @click="userPanel = 'users'"
                                :class="['w-full flex items-center gap-3 px-4 py-2 rounded-lg transition-colors text-left text-sm',
                                userPanel === 'users' ? 'bg-[#2A2B2E] text-blue-400' : 'text-gray-400 hover:bg-[#2A2B2E] hover:text-white']">
                                <span class="material-icons text-lg">people</span>
                                <span>Áî®Êà∑ÁÆ°ÁêÜ</span>
                            </button>
                        </nav>
                    </div>

                    <!-- Âè≥‰æßÂÜÖÂÆπÂå∫ -->
                    <div class="flex-1 overflow-y-auto">
                        <div class="max-w-4xl mx-auto w-full p-6 space-y-6">
                            <!-- ‰∏™‰∫∫ËµÑÊñôÈù¢Êùø -->
                            <div v-show="userPanel === 'profile'" class="space-y-6 animate-fade-in">
                                <div class="glass-panel rounded-xl border-transparent p-6 backdrop-blur-sm">
                                    <h2 class="text-xl font-bold text-white flex items-center gap-2 mb-6">
                                        <span class="material-icons text-blue-400">person</span>
                                        ‰∏™‰∫∫ËµÑÊñô
                                    </h2>

                                    <div v-if="currentUser" class="space-y-4">
                                        <div>
                                            <label class="block text-sm font-medium text-gray-300 mb-2">Áî®Êà∑Âêç</label>
                                            <input v-model="currentUser.username" type="text"
                                                class="w-full px-4 py-2 glass-input hover:bg-white/10 border-transparent rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all"
                                                placeholder="Áî®Êà∑Âêç" />
                                        </div>

                                        <div>
                                            <label class="block text-sm font-medium text-gray-300 mb-2">ÈÇÆÁÆ±</label>
                                            <input v-model="currentUser.email" type="email"
                                                class="w-full px-4 py-2 glass-input hover:bg-white/10 border-transparent rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all"
                                                placeholder="ÈÇÆÁÆ±ÔºàÂèØÈÄâÔºâ" />
                                        </div>

                                        <div>
                                            <label class="block text-sm font-medium text-gray-300 mb-2">Áî®Êà∑ID</label>
                                            <input :value="currentUser.id" type="text" disabled
                                                class="w-full px-4 py-2 bg-[#1a1b1c] border border-[#333] rounded-lg text-gray-500 cursor-not-allowed" />
                                        </div>

                                        <div>
                                            <label class="block text-sm font-medium text-gray-300 mb-2">Ë¥¶Êà∑Áä∂ÊÄÅ</label>
                                            <div class="flex items-center gap-2">
                                                <span
                                                    :class="['px-3 py-1 rounded-full text-sm font-medium', 
                                                currentUser.is_active ? 'bg-green-900/30 text-green-400' : 'bg-red-900/30 text-red-400']">
                                                    {{ currentUser.is_active ? 'Â∑≤ÊøÄÊ¥ª' : 'Â∑≤Á¶ÅÁî®' }}
                                                </span>
                                            </div>
                                        </div>

                                        <div class="flex gap-3 pt-4">
                                            <button @click="updateProfile"
                                                class="px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors">
                                                ‰øùÂ≠òÊõ¥Êîπ
                                            </button>
                                        </div>
                                    </div>
                                </div>

                                <!-- ‰øÆÊîπÂØÜÁ†Å -->
                                <div class="glass-panel rounded-xl border-transparent p-6 backdrop-blur-sm">
                                    <h2 class="text-xl font-bold text-white flex items-center gap-2 mb-6">
                                        <span class="material-icons text-blue-400">lock</span>
                                        ‰øÆÊîπÂØÜÁ†Å
                                    </h2>

                                    <div v-if="!isChangingPassword" class="text-center py-4">
                                        <button @click="isChangingPassword = true"
                                            class="px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors">
                                            ‰øÆÊîπÂØÜÁ†Å
                                        </button>
                                    </div>

                                    <div v-else class="space-y-4">
                                        <div>
                                            <label class="block text-sm font-medium text-gray-300 mb-2">ÊóßÂØÜÁ†Å</label>
                                            <input v-model="passwordForm.old_password" type="password"
                                                class="w-full px-4 py-2 glass-input hover:bg-white/10 border-transparent rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all"
                                                placeholder="ËØ∑ËæìÂÖ•ÊóßÂØÜÁ†Å" />
                                        </div>

                                        <div>
                                            <label class="block text-sm font-medium text-gray-300 mb-2">Êñ∞ÂØÜÁ†Å</label>
                                            <input v-model="passwordForm.new_password" type="password"
                                                class="w-full px-4 py-2 glass-input hover:bg-white/10 border-transparent rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all"
                                                placeholder="ËØ∑ËæìÂÖ•Êñ∞ÂØÜÁ†Å" />
                                        </div>

                                        <div>
                                            <label class="block text-sm font-medium text-gray-300 mb-2">Á°ÆËÆ§Êñ∞ÂØÜÁ†Å</label>
                                            <input v-model="passwordForm.confirm_password" type="password"
                                                class="w-full px-4 py-2 glass-input hover:bg-white/10 border-transparent rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all"
                                                placeholder="ËØ∑ÂÜçÊ¨°ËæìÂÖ•Êñ∞ÂØÜÁ†Å" />
                                        </div>

                                        <div class="flex gap-3 pt-4">
                                            <button @click="changePassword(currentUser.id)"
                                                class="px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors">
                                                Á°ÆËÆ§‰øÆÊîπ
                                            </button>
                                            <button
                                                @click="isChangingPassword = false; passwordForm = { old_password: '', new_password: '', confirm_password: '' }"
                                                class="px-6 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition-colors">
                                                ÂèñÊ∂à
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Áî®Êà∑ÁÆ°ÁêÜÈù¢ÊùøÔºà‰ªÖÁÆ°ÁêÜÂëòÔºâ -->
                            <div v-show="userPanel === 'users' && isAdmin" class="space-y-6 animate-fade-in">
                                <!-- ÂàõÂª∫Êñ∞Áî®Êà∑ -->
                                <div class="glass-panel rounded-xl border-transparent p-6 backdrop-blur-sm">
                                    <h2 class="text-xl font-bold text-white flex items-center gap-2 mb-6">
                                        <span class="material-icons text-blue-400">person_add</span>
                                        ÂàõÂª∫Êñ∞Áî®Êà∑
                                    </h2>

                                    <div class="space-y-4">
                                        <div>
                                            <label class="block text-sm font-medium text-gray-300 mb-2">Áî®Êà∑Âêç *</label>
                                            <input v-model="newUserForm.username" type="text"
                                                class="w-full px-4 py-2 glass-input hover:bg-white/10 border-transparent rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all"
                                                placeholder="ËØ∑ËæìÂÖ•Áî®Êà∑Âêç" />
                                        </div>

                                        <div>
                                            <label class="block text-sm font-medium text-gray-300 mb-2">ÂØÜÁ†Å *</label>
                                            <input v-model="newUserForm.password" type="password"
                                                class="w-full px-4 py-2 glass-input hover:bg-white/10 border-transparent rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all"
                                                placeholder="ËØ∑ËæìÂÖ•ÂØÜÁ†Å" />
                                        </div>

                                        <div>
                                            <label class="block text-sm font-medium text-gray-300 mb-2">ÈÇÆÁÆ±</label>
                                            <input v-model="newUserForm.email" type="email"
                                                class="w-full px-4 py-2 glass-input hover:bg-white/10 border-transparent rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all"
                                                placeholder="ÈÇÆÁÆ±ÔºàÂèØÈÄâÔºâ" />
                                        </div>

                                        <button @click="createUser"
                                            class="w-full px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors">
                                            ÂàõÂª∫Áî®Êà∑
                                        </button>
                                    </div>
                                </div>

                                <!-- Áî®Êà∑ÂàóË°® -->
                                <div class="glass-panel rounded-xl border-transparent p-6 backdrop-blur-sm">
                                    <h2 class="text-xl font-bold text-white flex items-center gap-2 mb-6">
                                        <span class="material-icons text-blue-400">people</span>
                                        Áî®Êà∑ÂàóË°®
                                    </h2>

                                    <div class="space-y-4">
                                        <div v-for="user in users" :key="user.id"
                                            class="glass-panel hover:bg-white/5 rounded-lg border-transparent p-4 transition-all">
                                            <div class="flex items-center justify-between mb-4">
                                                <div class="flex items-center gap-3">
                                                    <div
                                                        class="w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-sm font-bold text-white">
                                                        {{ user.username.charAt(0).toUpperCase() }}
                                                    </div>
                                                    <div>
                                                        <div class="text-white font-medium">{{ user.username }}</div>
                                                        <div class="text-sm text-gray-400">{{ user.email || 'Êú™ËÆæÁΩÆÈÇÆÁÆ±' }}
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="flex items-center gap-2">
                                                    <span
                                                        :class="['px-2 py-1 rounded text-xs font-medium', 
                                                    user.is_active ? 'bg-green-900/30 text-green-400' : 'bg-red-900/30 text-red-400']">
                                                        {{ user.is_active ? 'Â∑≤ÊøÄÊ¥ª' : 'Â∑≤Á¶ÅÁî®' }}
                                                    </span>
                                                    <span v-if="user.id === 1"
                                                        class="px-2 py-1 rounded text-xs font-medium bg-blue-900/30 text-blue-400">
                                                        ÁÆ°ÁêÜÂëò
                                                    </span>
                                                </div>
                                            </div>

                                            <div v-if="editingUser?.id === user.id && !isChangingPassword"
                                                class="space-y-3 pt-3 border-t border-[#333]">
                                                <div>
                                                    <label class="block text-xs text-gray-400 mb-1">Áî®Êà∑Âêç</label>
                                                    <input v-model="editingUser.username" type="text"
                                                        class="w-full px-3 py-2 bg-[#1a1b1c] border border-[#333] rounded text-white text-sm" />
                                                </div>
                                                <div>
                                                    <label class="block text-xs text-gray-400 mb-1">ÈÇÆÁÆ±</label>
                                                    <input v-model="editingUser.email" type="email"
                                                        class="w-full px-3 py-2 bg-[#1a1b1c] border border-[#333] rounded text-white text-sm" />
                                                </div>
                                                <div class="flex items-center gap-2">
                                                    <input type="checkbox" v-model="editingUser.is_active"
                                                        class="w-4 h-4" :disabled="user.id === 1" />
                                                    <label class="text-xs text-gray-400">Ë¥¶Êà∑ÊøÄÊ¥ª</label>
                                                </div>
                                                <div class="flex gap-2">
                                                    <button @click="updateUser(editingUser)"
                                                        class="px-4 py-1.5 bg-blue-600 hover:bg-blue-700 text-white rounded text-sm transition-colors">
                                                        ‰øùÂ≠ò
                                                    </button>
                                                    <button @click="editingUser = null"
                                                        class="px-4 py-1.5 bg-gray-600 hover:bg-gray-700 text-white rounded text-sm transition-colors">
                                                        ÂèñÊ∂à
                                                    </button>
                                                    <button @click="isChangingPassword = true"
                                                        class="px-4 py-1.5 bg-yellow-600 hover:bg-yellow-700 text-white rounded text-sm transition-colors">
                                                        ‰øÆÊîπÂØÜÁ†Å
                                                    </button>
                                                </div>
                                            </div>

                                            <div v-else-if="isChangingPassword && editingUser?.id === user.id"
                                                class="space-y-3 pt-3 border-t border-[#333]">
                                                <div>
                                                    <label class="block text-xs text-gray-400 mb-1">Êñ∞ÂØÜÁ†Å</label>
                                                    <input v-model="passwordForm.new_password" type="password"
                                                        class="w-full px-3 py-2 bg-[#1a1b1c] border border-[#333] rounded text-white text-sm"
                                                        placeholder="ËØ∑ËæìÂÖ•Êñ∞ÂØÜÁ†Å" />
                                                </div>
                                                <div>
                                                    <label class="block text-xs text-gray-400 mb-1">Á°ÆËÆ§Êñ∞ÂØÜÁ†Å</label>
                                                    <input v-model="passwordForm.confirm_password" type="password"
                                                        class="w-full px-3 py-2 bg-[#1a1b1c] border border-[#333] rounded text-white text-sm"
                                                        placeholder="ËØ∑ÂÜçÊ¨°ËæìÂÖ•Êñ∞ÂØÜÁ†Å" />
                                                </div>
                                                <div class="flex gap-2">
                                                    <button @click="changePassword(user.id, true)"
                                                        class="px-4 py-1.5 bg-blue-600 hover:bg-blue-700 text-white rounded text-sm transition-colors">
                                                        Á°ÆËÆ§‰øÆÊîπ
                                                    </button>
                                                    <button
                                                        @click="isChangingPassword = false; passwordForm = { old_password: '', new_password: '', confirm_password: '' }"
                                                        class="px-4 py-1.5 bg-gray-600 hover:bg-gray-700 text-white rounded text-sm transition-colors">
                                                        ÂèñÊ∂à
                                                    </button>
                                                </div>
                                            </div>

                                            <div v-else class="flex gap-2 pt-3 border-t border-[#333]">
                                                <button @click="editingUser = { ...user }; isChangingPassword = false"
                                                    class="px-4 py-1.5 bg-blue-600 hover:bg-blue-700 text-white rounded text-sm transition-colors">
                                                    ÁºñËæë
                                                </button>
                                                <button
                                                    @click="isChangingPassword = true; editingUser = { ...user }; passwordForm = { old_password: '', new_password: '', confirm_password: '' }"
                                                    class="px-4 py-1.5 bg-yellow-600 hover:bg-yellow-700 text-white rounded text-sm transition-colors">
                                                    ‰øÆÊîπÂØÜÁ†Å
                                                </button>
                                                <button v-if="user.id !== 1" @click="deleteUser(user.id)"
                                                    class="px-4 py-1.5 bg-red-600 hover:bg-red-700 text-white rounded text-sm transition-colors">
                                                    Âà†Èô§
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </main>

            <!-- Toast Notification -->
            <div v-if="toast.show"
                class="fixed top-6 right-6 z-[70] transition-all duration-300 transform translate-y-0 opacity-100">
                <div :class="['flex items-center gap-3 px-6 py-4 rounded-xl shadow-2xl border backdrop-blur-md', 
            toast.type === 'success' ? 'bg-green-500/10 border-green-500/20 text-green-400' : 
            toast.type === 'error' ? 'bg-red-500/10 border-red-500/20 text-red-400' : 
            'bg-blue-500/10 border-blue-500/20 text-blue-400']">
                    <span class="material-icons" v-if="toast.type === 'success'">check_circle</span>
                    <span class="material-icons" v-else-if="toast.type === 'error'">error</span>
                    <span class="material-icons" v-else>info</span>
                    <span class="font-medium">{{ toast.message }}</span>
                </div>
            </div>

            <!-- Feedback Modal -->
            <div v-if="showFeedbackModal" class="fixed inset-0 bg-black/80 flex items-center justify-center z-[60]">
                <div class="bg-[#1E1F20] rounded-xl border border-[#333] p-6 w-full max-w-md shadow-2xl">
                    <h3 class="text-lg font-bold text-white mb-4">Provide Feedback</h3>
                    <div class="space-y-3 mb-4">
                        <button @click="feedbackType = 'intent_wrong_search'"
                            :class="['w-full p-3 rounded-lg border text-left transition-colors', feedbackType==='intent_wrong_search'?'border-blue-500 bg-blue-500/10 text-blue-400':'border-[#333] hover:bg-[#2A2B2E] text-gray-300']">
                            üö´ Intent Wrong (Should Search)
                        </button>
                        <button @click="feedbackType = 'intent_wrong_chat'"
                            :class="['w-full p-3 rounded-lg border text-left transition-colors', feedbackType==='intent_wrong_chat'?'border-blue-500 bg-blue-500/10 text-blue-400':'border-[#333] hover:bg-[#2A2B2E] text-gray-300']">
                            üö´ Intent Wrong (Should Chat)
                        </button>
                        <button @click="feedbackType = 'answer_bad'"
                            :class="['w-full p-3 rounded-lg border text-left transition-colors', feedbackType==='answer_bad'?'border-blue-500 bg-blue-500/10 text-blue-400':'border-[#333] hover:bg-[#2A2B2E] text-gray-300']">
                            üëé Answer Bad
                        </button>
                    </div>
                    <textarea v-model="feedbackComment" placeholder="Optional comments..."
                        class="w-full bg-[#131314] border border-[#333] rounded-lg p-3 text-white focus:outline-none focus:border-blue-500 h-24 mb-4"></textarea>
                    <div class="flex justify-end gap-3">
                        <button @click="closeFeedbackModal"
                            class="px-4 py-2 text-gray-400 hover:text-white">Cancel</button>
                        <button @click="submitFeedback"
                            class="px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white rounded-lg">Submit</button>
                    </div>
                </div>
            </div>

            <!-- Side Drawer (Right) -->
            <div class="fixed inset-0 z-50 overflow-hidden pointer-events-none" v-if="isDrawerOpen">
                <!-- Backdrop -->
                <div class="absolute inset-0 bg-black/50 backdrop-blur-sm pointer-events-auto transition-opacity duration-300"
                    @click="closeArchiveDrawer"></div>

                <!-- Drawer Panel -->
                <div class="absolute right-0 top-0 bottom-0 w-full max-w-4xl bg-[#18181b] shadow-2xl pointer-events-auto transform transition-transform duration-300 border-l border-white/10 flex flex-col glass-heavy"
                    :class="isDrawerOpen ? 'translate-x-0' : 'translate-x-full'">

                    <div v-if="selectedArchive" class="flex flex-col h-full">
                        <!-- Header -->
                        <div class="p-6 border-b border-white/10 flex items-start justify-between bg-black/20">
                            <div>
                                <h2 class="text-lg font-bold text-white break-words">{{ selectedArchive.filename }}</h2>
                                <span
                                    class="inline-block mt-2 px-2 py-1 bg-cyan-900/30 text-cyan-400 text-xs rounded border border-cyan-500/20">
                                    {{ selectedArchive.category }}
                                </span>
                            </div>
                            <button @click="closeArchiveDrawer"
                                class="text-gray-400 hover:text-white transition-colors">
                                <span class="material-icons">close</span>
                            </button>
                        </div>

                        <!-- Content -->
                        <div class="flex-1 overflow-y-auto p-6 space-y-6">
                            <!-- Summary Block -->
                            <div class="bg-white/5 rounded-xl p-4 border border-white/5">
                                <h3 class="text-sm font-bold text-gray-300 mb-2 flex items-center gap-2">
                                    <span class="material-icons text-sm text-yellow-400">auto_awesome</span>
                                    AI ÊëòË¶Å
                                </h3>
                                <p class="text-sm text-gray-400 leading-relaxed">
                                    {{ selectedArchive.summary || "ÊöÇÊó†ÊëòË¶Å" }}
                                </p>
                            </div>
                            <!-- Full Text Block -->
                            <div v-if="selectedArchive.full_text"
                                class="bg-white/5 rounded-xl p-4 border border-white/5">
                                <h3 class="text-sm font-bold text-gray-300 mb-2 flex items-center gap-2">
                                    <span class="material-icons text-sm text-blue-400">description</span>
                                    ÂÆåÊï¥ÂÜÖÂÆπ
                                </h3>
                                <p class="text-sm text-gray-400 leading-relaxed whitespace-pre-wrap">
                                    {{ selectedArchive.full_text }}
                                </p>
                            </div>

                            <!-- Metadata -->
                            <div class="space-y-3">
                                <h3 class="text-sm font-bold text-gray-300">ÂÖÉÊï∞ÊçÆ</h3>
                                <div class="grid grid-cols-2 gap-4 text-xs">
                                    <div class="bg-black/30 p-3 rounded-lg border border-white/5">
                                        <span class="block text-gray-500 mb-1">ID</span>
                                        <span class="text-gray-300 font-mono">#{{ selectedArchive.id }}</span>
                                    </div>
                                    <div class="bg-black/30 p-3 rounded-lg border border-white/5">
                                        <span class="block text-gray-500 mb-1">ÁΩÆ‰ø°Â∫¶</span>
                                        <span class="text-green-400 font-mono">{{ selectedArchive.confidence ?
                                            selectedArchive.confidence + '%' : 'N/A' }}</span>
                                    </div>
                                </div>
                            </div>

                            <!-- Status/Reasoning -->
                            <div v-if="selectedArchive.reasoning"
                                class="bg-red-900/10 rounded-xl p-4 border border-red-500/20">
                                <h3 class="text-sm font-bold text-red-400 mb-2">Issues</h3>
                                <p class="text-xs text-red-300 font-mono">{{ selectedArchive.reasoning }}</p>
                            </div>
                        </div>

                        <!-- Footer -->
                        <div class="p-4 border-t border-white/10 bg-black/20 flex gap-3">
                            <button v-if="selectedArchive.relative_path" @click="downloadSourceFile(selectedArchive)"
                                class="flex-1 py-2 bg-white/5 hover:bg-white/10 text-gray-300 rounded-lg text-sm transition-colors border border-white/5 text-center flex items-center justify-center gap-2">
                                <span class="material-icons text-sm">download</span>
                                ‰∏ãËΩΩÊ∫êÊñá‰ª∂
                            </button>
                            <button v-if="selectedArchive.id" @click="deleteArchive(selectedArchive.id)"
                                class="flex-1 py-2 bg-red-900/20 hover:bg-red-900/40 text-red-400 rounded-lg text-sm transition-colors border border-red-500/20 flex items-center justify-center gap-2">
                                <span class="material-icons text-sm">delete</span>
                                Âà†Èô§ËÆ∞ÂΩï
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Long Text View Modal -->
            <div v-if="longTextModal && longTextModal.show"
                class="fixed inset-0 z-[80] flex items-center justify-center bg-black/80 backdrop-blur-sm"
                @click="longTextModal.show = false">
                <div class="bg-[#1E1F20] rounded-xl border border-[#333] shadow-2xl w-full max-w-2xl mx-4 overflow-hidden flex flex-col max-h-[80vh]"
                    @click.stop>
                    <div class="flex items-center justify-between p-4 border-b border-[#333]">
                        <h3 class="text-lg font-bold text-white flex items-center gap-2">
                            <span class="material-icons text-blue-400">article</span>
                            ËØ¶ÁªÜÂÜÖÂÆπ
                        </h3>
                        <button @click="longTextModal.show = false" class="text-gray-400 hover:text-white">
                            <span class="material-icons">close</span>
                        </button>
                    </div>
                    <div class="p-6 overflow-y-auto">
                        <pre
                            class="whitespace-pre-wrap text-sm text-gray-300 font-mono leading-relaxed">{{ longTextModal.content }}</pre>
                    </div>
                </div>
            </div>

            <!-- Add Storage Modal -->
            <div v-if="showStorageModal"
                class="fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm">
                <div
                    class="bg-[#1E1F20] rounded-xl border border-[#333] shadow-2xl w-full max-w-lg mx-4 overflow-hidden">
                    <div class="flex items-center justify-between p-4 border-b border-[#333]">
                        <h3 class="text-lg font-bold text-white flex items-center gap-2">
                            <span class="material-icons text-orange-400">add_circle</span>
                            Ê∑ªÂä†Â≠òÂÇ®Â∫ì
                        </h3>
                        <button @click="closeStorageModal" class="text-gray-400 hover:text-white">
                            <span class="material-icons">close</span>
                        </button>
                    </div>

                    <div class="p-6 space-y-4">
                        <div>
                            <label class="block text-sm text-gray-400 mb-2">Â≠òÂÇ®Â∫ìÂêçÁß∞</label>
                            <input v-model="storageForm.name" type="text" placeholder="‰æãÂ¶Ç: Á°¨Áõò2, Â§á‰ªΩÁõò"
                                class="w-full bg-[#131314] border border-[#333] rounded-lg px-4 py-2 text-white focus:outline-none focus:border-orange-500">
                        </div>

                        <div>
                            <label class="block text-sm text-gray-400 mb-2">ÊåÇËΩΩË∑ØÂæÑ</label>
                            <div class="flex gap-2">
                                <input v-model="storageForm.mount_path" type="text"
                                    placeholder="/mnt/disk2 Êàñ /data/storage"
                                    class="flex-1 bg-[#131314] border border-[#333] rounded-lg px-4 py-2 text-white font-mono focus:outline-none focus:border-orange-500">
                                <button @click="openFolderBrowser"
                                    class="px-4 py-2 bg-[#2A2B2E] hover:bg-[#333] text-gray-300 rounded-lg flex items-center gap-2">
                                    <span class="material-icons text-sm">folder_open</span>
                                    ÊµèËßà
                                </button>
                            </div>
                        </div>

                        <div class="flex items-center gap-3">
                            <button @click="storageForm.is_default = !storageForm.is_default" :class="['relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none',
                                storageForm.is_default ? 'bg-orange-500' : 'bg-gray-700']">
                                <span :class="['inline-block h-4 w-4 transform rounded-full bg-white transition-transform',
                                storageForm.is_default ? 'translate-x-6' : 'translate-x-1']"></span>
                            </button>
                            <span class="text-sm text-gray-300">ËÆæ‰∏∫ÈªòËÆ§Â≠òÂÇ®Â∫ì</span>
                        </div>
                    </div>

                    <div class="p-4 bg-[#151617] border-t border-[#333] flex justify-end gap-3">
                        <button @click="closeStorageModal"
                            class="px-4 py-2 bg-[#2A2B2E] hover:bg-[#333] text-gray-300 rounded-lg">
                            ÂèñÊ∂à
                        </button>
                        <button @click="createStorageRoot" :disabled="isSubmittingStorage"
                            class="px-4 py-2 bg-orange-600 hover:bg-orange-500 text-white rounded-lg disabled:opacity-50 flex items-center gap-2">
                            <span v-if="isSubmittingStorage" class="material-icons text-sm animate-spin">refresh</span>
                            {{ isSubmittingStorage ? 'Ê∑ªÂä†‰∏≠...' : 'Á°ÆËÆ§Ê∑ªÂä†' }}
                        </button>
                    </div>
                </div>
            </div>

            <!-- Folder Browser Modal -->
            <div v-if="showFolderBrowser"
                class="fixed inset-0 z-[60] flex items-center justify-center bg-black/60 backdrop-blur-sm">
                <div
                    class="bg-[#1E1F20] rounded-xl border border-[#333] shadow-2xl w-full max-w-xl mx-4 overflow-hidden">
                    <div class="flex items-center justify-between p-4 border-b border-[#333]">
                        <h3 class="text-lg font-bold text-white flex items-center gap-2">
                            <span class="material-icons text-blue-400">folder_open</span>
                            ÈÄâÊã©ÁõÆÂΩï
                        </h3>
                        <button @click="showFolderBrowser = false" class="text-gray-400 hover:text-white">
                            <span class="material-icons">close</span>
                        </button>
                    </div>

                    <div class="p-4 border-b border-[#333] bg-[#151617]">
                        <div class="flex items-center gap-2">
                            <button @click="browseUp" :disabled="currentBrowsePath === '/'"
                                class="p-2 bg-[#2A2B2E] hover:bg-[#333] text-gray-300 rounded-lg disabled:opacity-50">
                                <span class="material-icons text-sm">arrow_upward</span>
                            </button>
                            <div
                                class="flex-1 bg-[#131314] border border-[#333] rounded-lg px-3 py-2 text-sm text-gray-400 font-mono truncate">
                                {{ currentBrowsePath }}
                            </div>
                        </div>
                    </div>

                    <div class="max-h-80 overflow-y-auto p-2">
                        <div v-if="isBrowsingLoading" class="text-center py-8 text-gray-500">
                            <span class="material-icons text-2xl animate-spin mb-2">refresh</span>
                            <p>Âä†ËΩΩ‰∏≠...</p>
                        </div>
                        <div v-else-if="!browserItems || browserItems.length === 0"
                            class="text-center py-8 text-gray-500">
                            <span class="material-icons text-2xl mb-2">folder_off</span>
                            <p>Ê≠§ÁõÆÂΩï‰∏∫Á©∫ÊàñÊó†ÊùÉËÆøÈóÆ</p>
                        </div>
                        <div v-else class="space-y-1">
                            <div v-for="item in browserItems" :key="item.path" @click="browseTo(item.path)"
                                class="flex items-center gap-3 px-3 py-2 rounded-lg cursor-pointer hover:bg-[#2A2B2E] text-gray-300 transition-colors">
                                <span class="material-icons text-yellow-400">folder</span>
                                <span class="text-sm truncate">{{ item.name }}</span>
                            </div>
                        </div>
                    </div>

                    <div class="p-4 bg-[#151617] border-t border-[#333] flex justify-end gap-3">
                        <button @click="showFolderBrowser = false"
                            class="px-4 py-2 bg-[#2A2B2E] hover:bg-[#333] text-gray-300 rounded-lg">
                            ÂèñÊ∂à
                        </button>
                        <button @click="selectCurrentFolder"
                            class="px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white rounded-lg flex items-center gap-2">
                            <span class="material-icons text-sm">check</span>
                            ÈÄâÊã©Ê≠§ÁõÆÂΩï
                        </button>
                    </div>
                </div>
            </div>

            <!-- Global Session Menu (Fixed Position) -->
            <teleport to="body">
                <div v-if="sessionMenu.visible"
                    class="fixed w-32 bg-[#2A2B2E] border border-[#333] rounded-lg shadow-2xl z-[9999] overflow-hidden flex flex-col transition-all"
                    :style="{ top: sessionMenu.y + 'px', left: sessionMenu.x + 'px' }">
                    <button
                        @click.stop="handleRenameSession(sessionMenu.sessionId, sessionMenu.sessionTitle); closeSessionMenu()"
                        class="w-full text-left px-4 py-3 text-sm text-gray-300 hover:bg-[#333] hover:text-white flex items-center gap-2">
                        <span class="material-icons text-sm">edit</span> ÈáçÂëΩÂêç
                    </button>
                    <button @click.stop="deleteSession(sessionMenu.sessionId); closeSessionMenu()"
                        class="w-full text-left px-4 py-3 text-sm text-red-400 hover:bg-[#333] hover:text-red-300 flex items-center gap-2">
                        <span class="material-icons text-sm">delete</span> Âà†Èô§
                    </button>
                </div>
            </teleport>

            <div v-if="isMobileMenuOpen" @click="isMobileMenuOpen = false"
                class="md:hidden absolute inset-0 bg-black/60 z-30 backdrop-blur-sm"></div>
        </div>
    </div>
    </div>
    </div>
    </div>
    </div>
    <script src="/static/js/audio_manager.js"></script>
    <script src="/static/js/app.js?t=1766020580"></script>
</body>

</html>